(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.DOMPurify=a())}(this,(function(){var h=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"];var k=["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"];var n=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"];var u=["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"];var j=["#text"];var i=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"];var o=["accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"];var w=["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"];var c=["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"];function s(z,y){var x=y.length;while(x--){if(typeof y[x]==="string"){y[x]=y[x].toLowerCase()}z[y[x]]=true}return z}function q(x){var y={};var z=void 0;for(z in x){if(Object.prototype.hasOwnProperty.call(x,z)){y[z]=x[z]}}return y}var e=/\{\{[\s\S]*|[\s\S]*\}\}/gm;var b=/<%[\s\S]*|[\s\S]*%>/gm;var m=/^data-[\-\w.\u00B7-\uFFFF]/;var t=/^aria-[\-\w]+$/;var r=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i;var v=/^(?:\w+script|data):/i;var p=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;var g=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol==="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x};function d(x){if(Array.isArray(x)){for(var z=0,y=Array(x.length);z<x.length;z++){y[z]=x[z]}return y}else{return Array.from(x)}}var l=function l(){return typeof window==="undefined"?null:window};function f(){var aD=arguments.length>0&&arguments[0]!==undefined?arguments[0]:l();var au=function au(aO){return f(aO)};au.version="1.0.7";au.removed=[];if(!aD||!aD.document||aD.document.nodeType!==9){au.isSupported=false;return au}var ai=aD.document;var ap=false;var at=false;var D=aD.document;var H=aD.DocumentFragment,ax=aD.HTMLTemplateElement,ad=aD.Node,ay=aD.NodeFilter,ag=aD.NamedNodeMap,az=ag===undefined?aD.NamedNodeMap||aD.MozNamedAttrMap:ag,aa=aD.Text,aj=aD.Comment,Z=aD.DOMParser;if(typeof ax==="function"){var E=D.createElement("template");if(E.content&&E.content.ownerDocument){D=E.content.ownerDocument}}var am=D,ae=am.implementation,N=am.createNodeIterator,af=am.getElementsByTagName,ac=am.createDocumentFragment;var aH=ai.importNode;var G={};au.isSupported=ae&&typeof ae.createHTMLDocument!=="undefined"&&D.documentMode!==9;var Y=e,aq=b,W=m,aJ=t,K=v,F=p;var ah=r;var ao=null;var aF=s({},[].concat(d(h),d(k),d(n),d(u),d(j)));var X=null;var ak=s({},[].concat(d(i),d(o),d(w),d(c)));var Q=null;var z=null;var S=true;var O=true;var J=false;var aN=false;var aM=false;var an=false;var aB=false;var M=false;var aw=false;var aC=false;var y=false;var P=true;var C=true;var B=false;var av={};var ar=s({},["audio","head","math","script","style","template","svg","video"]);var aE=s({},["audio","video","img","source","image"]);var I=s({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]);var T=null;var aL=D.createElement("form");var R=function R(aO){if((typeof aO==="undefined"?"undefined":g(aO))!=="object"){aO={}}ao="ALLOWED_TAGS" in aO?s({},aO.ALLOWED_TAGS):aF;X="ALLOWED_ATTR" in aO?s({},aO.ALLOWED_ATTR):ak;Q="FORBID_TAGS" in aO?s({},aO.FORBID_TAGS):{};z="FORBID_ATTR" in aO?s({},aO.FORBID_ATTR):{};av="USE_PROFILES" in aO?aO.USE_PROFILES:false;S=aO.ALLOW_ARIA_ATTR!==false;O=aO.ALLOW_DATA_ATTR!==false;J=aO.ALLOW_UNKNOWN_PROTOCOLS||false;aN=aO.SAFE_FOR_JQUERY||false;aM=aO.SAFE_FOR_TEMPLATES||false;an=aO.WHOLE_DOCUMENT||false;aw=aO.RETURN_DOM||false;aC=aO.RETURN_DOM_FRAGMENT||false;y=aO.RETURN_DOM_IMPORT||false;M=aO.FORCE_BODY||false;P=aO.SANITIZE_DOM!==false;C=aO.KEEP_CONTENT!==false;B=aO.IN_PLACE||false;ah=aO.ALLOWED_URI_REGEXP||ah;if(aM){O=false}if(aC){aw=true}if(av){ao=s({},[].concat(d(j)));X=[];if(av.html===true){s(ao,h);s(X,i)}if(av.svg===true){s(ao,k);s(X,o);s(X,c)}if(av.svgFilters===true){s(ao,n);s(X,o);s(X,c)}if(av.mathMl===true){s(ao,u);s(X,w);s(X,c)}}if(aO.ADD_TAGS){if(ao===aF){ao=q(ao)}s(ao,aO.ADD_TAGS)}if(aO.ADD_ATTR){if(X===ak){X=q(X)}s(X,aO.ADD_ATTR)}if(aO.ADD_URI_SAFE_ATTR){s(I,aO.ADD_URI_SAFE_ATTR)}if(C){ao["#text"]=true}if(an){s(ao,["html","head","body"])}if(ao.table){s(ao,["tbody"])}if(Object&&"freeze" in Object){Object.freeze(aO)}T=aO};var V=function V(aP){au.removed.push({element:aP});try{aP.parentNode.removeChild(aP)}catch(aO){aP.outerHTML=""}};var U=function U(aO,aQ){try{au.removed.push({attribute:aQ.getAttributeNode(aO),from:aQ})}catch(aP){au.removed.push({attribute:null,from:aQ})}aQ.removeAttribute(aO)};var A=function A(aP){var aR=void 0;if(M){aP="<remove></remove>"+aP}if(ap){try{aR=new Z().parseFromString(aP,"text/html")}catch(aQ){}}if(at){s(Q,["title"])}if(!aR||!aR.documentElement){aR=ae.createHTMLDocument("");var aS=aR,aO=aS.body;aO.parentNode.removeChild(aO.parentNode.firstElementChild);aO.outerHTML=aP}return af.call(aR,an?"html":"body")[0]};if(au.isSupported){(function(){try{var aP=A('<svg><p><style><img src="</style><img src=x onerror=alert(1)//">');if(aP.querySelector("svg img")){ap=true}}catch(aO){}})();(function(){try{var aP=A("<x/><title>&lt;/title&gt;&lt;img&gt;");if(aP.querySelector("title").textContent.match(/<\/title/)){at=true}}catch(aO){}})()}var x=function x(aO){return N.call(aO.ownerDocument||aO,aO,ay.SHOW_ELEMENT|ay.SHOW_COMMENT|ay.SHOW_TEXT,function(){return ay.FILTER_ACCEPT},false)};var L=function L(aO){if(aO instanceof aa||aO instanceof aj){return false}if(typeof aO.nodeName!=="string"||typeof aO.textContent!=="string"||typeof aO.removeChild!=="function"||!(aO.attributes instanceof az)||typeof aO.removeAttribute!=="function"||typeof aO.setAttribute!=="function"){return true}return false};var ab=function ab(aO){return(typeof ad==="undefined"?"undefined":g(ad))==="object"?aO instanceof ad:aO&&(typeof aO==="undefined"?"undefined":g(aO))==="object"&&typeof aO.nodeType==="number"&&typeof aO.nodeName==="string"};var aI=function aI(aQ,aO,aP){if(!G[aQ]){return}G[aQ].forEach(function(aR){aR.call(au,aO,aP,T)})};var aK=function aK(aP){var aR=void 0;aI("beforeSanitizeElements",aP,null);if(L(aP)){V(aP);return true}var aO=aP.nodeName.toLowerCase();aI("uponSanitizeElement",aP,{tagName:aO,allowedTags:ao});if(!ao[aO]||Q[aO]){if(C&&!ar[aO]&&typeof aP.insertAdjacentHTML==="function"){try{aP.insertAdjacentHTML("AfterEnd",aP.innerHTML)}catch(aQ){}}V(aP);return true}if(aN&&!aP.firstElementChild&&(!aP.content||!aP.content.firstElementChild)&&/</g.test(aP.textContent)){au.removed.push({element:aP.cloneNode()});if(aP.innerHTML){aP.innerHTML=aP.innerHTML.replace(/</g,"&lt;")}else{aP.innerHTML=aP.textContent.replace(/</g,"&lt;")}}if(aM&&aP.nodeType===3){aR=aP.textContent;aR=aR.replace(Y," ");aR=aR.replace(aq," ");if(aP.textContent!==aR){au.removed.push({element:aP.cloneNode()});aP.textContent=aR}}aI("afterSanitizeElements",aP,null);return false};var al=function al(aP,aO,aQ){if(P&&(aO==="id"||aO==="name")&&(aQ in D||aQ in aL)){return false}if(aM){aQ=aQ.replace(Y," ");aQ=aQ.replace(aq," ")}if(O&&W.test(aO)){}else{if(S&&aJ.test(aO)){}else{if(!X[aO]||z[aO]){return false}else{if(I[aO]){}else{if(ah.test(aQ.replace(F,""))){}else{if((aO==="src"||aO==="xlink:href")&&aQ.indexOf("data:")===0&&aE[aP]){}else{if(J&&!K.test(aQ.replace(F,""))){}else{if(!aQ){}else{return false}}}}}}}}return true};var aA=function aA(aP){var aV=void 0;var aX=void 0;var aZ=void 0;var aU=void 0;var aQ=void 0;aI("beforeSanitizeAttributes",aP,null);var aT=aP.attributes;if(!aT){return}var aY={attrName:"",attrValue:"",keepAttr:true,allowedAttributes:X};aQ=aT.length;while(aQ--){aV=aT[aQ];var aS=aV,aO=aS.name;aX=aV.value.trim();aZ=aO.toLowerCase();aY.attrName=aZ;aY.attrValue=aX;aY.keepAttr=true;aI("uponSanitizeAttribute",aP,aY);aX=aY.attrValue;if(aZ==="name"&&aP.nodeName==="IMG"&&aT.id){aU=aT.id;aT=Array.prototype.slice.apply(aT);U("id",aP);U(aO,aP);if(aT.indexOf(aU)>aQ){aP.setAttribute("id",aU.value)}}else{if(aP.nodeName==="INPUT"&&aZ==="type"&&aX==="file"&&(X[aZ]||!z[aZ])){continue}else{if(aO==="id"){aP.setAttribute(aO,"")}U(aO,aP)}}if(!aY.keepAttr){continue}var aW=aP.nodeName.toLowerCase();if(!al(aW,aZ,aX)){continue}try{aP.setAttribute(aO,aX);au.removed.pop()}catch(aR){}}aI("afterSanitizeAttributes",aP,null)};var aG=function aG(aO){var aQ=void 0;var aP=x(aO);aI("beforeSanitizeShadowDOM",aO,null);while(aQ=aP.nextNode()){aI("uponSanitizeShadowNode",aQ,null);if(aK(aQ)){continue}if(aQ.content instanceof H){aG(aQ.content)}aA(aQ)}aI("afterSanitizeShadowDOM",aO,null)};au.sanitize=function(aT,aP){var aO=void 0;var aS=void 0;var aR=void 0;var aV=void 0;var aQ=void 0;if(!aT){aT="<!-->"}if(typeof aT!=="string"&&!ab(aT)){if(typeof aT.toString!=="function"){throw new TypeError("toString is not a function")}else{aT=aT.toString();if(typeof aT!=="string"){throw new TypeError("dirty is not a string, aborting")}}}if(!au.isSupported){if(g(aD.toStaticHTML)==="object"||typeof aD.toStaticHTML==="function"){if(typeof aT==="string"){return aD.toStaticHTML(aT)}if(ab(aT)){return aD.toStaticHTML(aT.outerHTML)}}return aT}if(!aB){R(aP)}au.removed=[];if(B){}else{if(aT instanceof ad){aO=A("<!-->");aS=aO.ownerDocument.importNode(aT,true);if(aS.nodeType===1&&aS.nodeName==="BODY"){aO=aS}else{aO.appendChild(aS)}}else{if(!aw&&!an&&aT.indexOf("<")===-1){return aT}aO=A(aT);if(!aO){return aw?null:""}}}if(aO&&M){V(aO.firstChild)}var aU=x(B?aT:aO);while(aR=aU.nextNode()){if(aR.nodeType===3&&aR===aV){continue}if(aK(aR)){continue}if(aR.content instanceof H){aG(aR.content)}aA(aR);aV=aR}if(B){return aT}if(aw){if(aC){aQ=ac.call(aO.ownerDocument);while(aO.firstChild){aQ.appendChild(aO.firstChild)}}else{aQ=aO}if(y){aQ=aH.call(ai,aQ,true)}return aQ}return an?aO.outerHTML:aO.innerHTML};au.setConfig=function(aO){R(aO);aB=true};au.clearConfig=function(){T=null;aB=false};au.isValidAttribute=function(aP,aO,aS){if(!T){R({})}var aR=aP.toLowerCase();var aQ=aO.toLowerCase();return al(aR,aQ,aS)};au.addHook=function(aP,aO){if(typeof aO!=="function"){return}G[aP]=G[aP]||[];G[aP].push(aO)};au.removeHook=function(aO){if(G[aO]){G[aO].pop()}};au.removeHooks=function(aO){if(G[aO]){G[aO]=[]}};au.removeAllHooks=function(){G={}};return au}var a=f();return a})));