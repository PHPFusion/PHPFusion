(function(a){var k={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function g(m,l){return l*Math.floor(m/l)}function j(t,n,q,m){if(typeof t.strftime=="function"){return t.strftime(n)}var w=function(y,r){y=""+y;r=""+(r==null?"0":r);return y.length==1?r+y:y};var l=[];var x=false;var v=t.getHours();var s=v<12;if(q==null){q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(m==null){m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}var o;if(v>12){o=v-12}else{if(v==0){o=12}else{o=v}}for(var p=0;p<n.length;++p){var u=n.charAt(p);if(x){switch(u){case"a":u=""+m[t.getDay()];break;case"b":u=""+q[t.getMonth()];break;case"d":u=w(t.getDate());break;case"e":u=w(t.getDate()," ");break;case"h":case"H":u=w(v);break;case"I":u=w(o);break;case"l":u=w(o," ");break;case"m":u=w(t.getMonth()+1);break;case"M":u=w(t.getMinutes());break;case"q":u=""+(Math.floor(t.getMonth()/3)+1);break;case"S":u=w(t.getSeconds());break;case"y":u=w(t.getFullYear()%100);break;case"Y":u=""+t.getFullYear();break;case"p":u=(s)?("am"):("pm");break;case"P":u=(s)?("AM"):("PM");break;case"w":u=""+t.getDay();break}l.push(u);x=false}else{if(u=="%"){x=true}else{l.push(u)}}}return l.join("")}function i(q){function l(s,r,p,t){s[r]=function(){return p[t].apply(p,arguments)}}var n={date:q};if(q.strftime!=undefined){l(n,"strftime",q,"strftime")}l(n,"getTime",q,"getTime");l(n,"setTime",q,"setTime");var m=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var o=0;o<m.length;o++){l(n,"get"+m[o],q,"getUTC"+m[o]);l(n,"set"+m[o],q,"setUTC"+m[o])}return n}function e(m,l){if(l.timezone=="browser"){return new Date(m)}else{if(!l.timezone||l.timezone=="utc"){return i(new Date(m))}else{if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var n=new timezoneJS.Date();n.setTimezone(l.timezone);n.setTime(m);return n}else{return i(new Date(m))}}}}var c={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,quarter:3*30*24*60*60*1000,year:365.2425*24*60*60*1000};var f=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"]];var b=f.concat([[3,"month"],[6,"month"],[1,"year"]]);var d=f.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function h(l){l.hooks.processOptions.push(function(n,m){a.each(n.getAxes(),function(q,o){var p=o.options;if(p.mode=="time"){o.tickGenerator=function(x){var D=[];var C=e(x.min,p);var u=0;var G=(p.tickSize&&p.tickSize[1]==="quarter")||(p.minTickSize&&p.minTickSize[1]==="quarter")?d:b;if(p.minTickSize!=null){if(typeof p.tickSize=="number"){u=p.tickSize}else{u=p.minTickSize[0]*c[p.minTickSize[1]]}}for(var B=0;B<G.length-1;++B){if(x.delta<(G[B][0]*c[G[B][1]]+G[B+1][0]*c[G[B+1][1]])/2&&G[B][0]*c[G[B][1]]>=u){break}}var I=G[B][0];var E=G[B][1];if(E=="year"){if(p.minTickSize!=null&&p.minTickSize[1]=="year"){I=Math.floor(p.minTickSize[0])}else{var s=Math.pow(10,Math.floor(Math.log(x.delta/c.year)/Math.LN10));var r=(x.delta/c.year)/s;if(r<1.5){I=1}else{if(r<3){I=2}else{if(r<7.5){I=5}else{I=10}}}I*=s}if(I<1){I=1}}x.tickSize=p.tickSize||[I,E];var A=x.tickSize[0];E=x.tickSize[1];var w=A*c[E];if(E=="second"){C.setSeconds(g(C.getSeconds(),A))}else{if(E=="minute"){C.setMinutes(g(C.getMinutes(),A))}else{if(E=="hour"){C.setHours(g(C.getHours(),A))}else{if(E=="month"){C.setMonth(g(C.getMonth(),A))}else{if(E=="quarter"){C.setMonth(3*g(C.getMonth()/3,A))}else{if(E=="year"){C.setFullYear(g(C.getFullYear(),A))}}}}}}C.setMilliseconds(0);if(w>=c.minute){C.setSeconds(0)}if(w>=c.hour){C.setMinutes(0)}if(w>=c.day){C.setHours(0)}if(w>=c.day*4){C.setDate(1)}if(w>=c.month*2){C.setMonth(g(C.getMonth(),3))}if(w>=c.quarter*2){C.setMonth(g(C.getMonth(),6))}if(w>=c.year){C.setMonth(0)}var H=0;var F=Number.NaN;var y;do{y=F;F=C.getTime();D.push(F);if(E=="month"||E=="quarter"){if(A<1){C.setDate(1);var t=C.getTime();C.setMonth(C.getMonth()+(E=="quarter"?3:1));var z=C.getTime();C.setTime(F+H*c.hour+(z-t)*A);H=C.getHours();C.setHours(0)}else{C.setMonth(C.getMonth()+A*(E=="quarter"?3:1))}}else{if(E=="year"){C.setFullYear(C.getFullYear()+A)}else{C.setTime(F+w)}}}while(F<x.max&&F!=y);return D};o.tickFormatter=function(y,s){var w=e(y,s.options);if(p.timeformat!=null){return j(w,p.timeformat,p.monthNames,p.dayNames)}var C=(s.options.tickSize&&s.options.tickSize[1]=="quarter")||(s.options.minTickSize&&s.options.minTickSize[1]=="quarter");var B=s.tickSize[0]*c[s.tickSize[1]];var x=s.max-s.min;var A=(p.twelveHourClock)?" %p":"";var z=(p.twelveHourClock)?"%I":"%H";var r;if(B<c.minute){r=z+":%M:%S"+A}else{if(B<c.day){if(x<2*c.day){r=z+":%M"+A}else{r="%b %d "+z+":%M"+A}}else{if(B<c.month){r="%b %d"}else{if((C&&B<c.quarter)||(!C&&B<c.year)){if(x<c.year){r="%b"}else{r="%b %Y"}}else{if(C&&B<c.year){if(x<c.year){r="Q%q"}else{r="Q%q %Y"}}else{r="%Y"}}}}}var u=j(w,r,p.monthNames,p.dayNames);return u}}})})}a.plot.plugins.push({init:h,options:k,name:"time",version:"1.0"});a.plot.formatDate=j;a.plot.dateGenerator=e})(jQuery);