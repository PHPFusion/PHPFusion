(function(d){function e(k,t,j,s,i,r,u){var o=Math.pow,v=Math.sqrt,w,n,m,l,h,g,q,p;w=v(o(j-k,2)+o(s-t,2));n=v(o(i-j,2)+o(r-s,2));m=u*w/(w+n);l=u-m;h=j+m*(k-i);g=s+m*(t-r);q=j-l*(k-i);p=s-l*(t-r);return[h,g,q,p]}var b=[];function f(m,j,g,n,h){var o=d.color.parse(h);o.a=typeof n=="number"?n:0.3;o.normalize();o=o.toString();j.beginPath();j.moveTo(m[0][0],m[0][1]);var k=m.length;for(var l=0;l<k;l++){j[m[l][3]].apply(j,m[l][2])}j.stroke();j.lineWidth=0;j.lineTo(m[k-1][0],g);j.lineTo(m[0][0],g);j.closePath();if(n!==false){j.fillStyle=o;j.fill()}}function a(g,i,h,j){if(i===void 0||(i!=="bezier"&&i!=="quadratic")){i="quadratic"}i=i+"CurveTo";if(b.length==0){b.push([h[0],h[1],j.concat(h.slice(2)),i])}else{if(i=="quadraticCurveTo"&&h.length==2){j=j.slice(0,2).concat(h);b.push([h[0],h[1],j,i])}else{b.push([h[2],h[3],j.concat(h.slice(2)),i])}}}function c(k,r,i){if(i.splines.show!==true){return}var l=[],o=i.splines.tension||0.5,p,n,m,q=i.datapoints.points,g=i.datapoints.pointsize,h=k.getPlotOffset(),j=q.length,s=[];b=[];if(j/g<4){d.extend(i.lines,i.splines);return}for(p=0;p<j;p+=g){n=q[p];m=q[p+1];if(n==null||n<i.xaxis.min||n>i.xaxis.max||m<i.yaxis.min||m>i.yaxis.max){continue}s.push(i.xaxis.p2c(n)+h.left,i.yaxis.p2c(m)+h.top)}j=s.length;for(p=0;p<j-2;p+=2){l=l.concat(e.apply(this,s.slice(p,p+6).concat([o])))}r.save();r.strokeStyle=i.color;r.lineWidth=i.splines.lineWidth;a(r,"quadratic",s.slice(0,4),l.slice(0,2));for(p=2;p<j-3;p+=2){a(r,"bezier",s.slice(p,p+4),l.slice(2*p-2,2*p+2))}a(r,"quadratic",s.slice(j-2,j),[l[2*j-10],l[2*j-9],s[j-4],s[j-3]]);f(b,r,k.height()+10,i.splines.fill,i.color);r.restore()}d.plot.plugins.push({init:function(g){g.hooks.drawSeries.push(c)},options:{series:{splines:{show:false,lineWidth:2,tension:0.5,fill:false}}},name:"spline",version:"0.8.2"})})(jQuery);