(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("commonlisp",function(c){var j=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/;var g=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/;var d=/[^\s'`,@()\[\]";]/;var h;function f(l){var k;while(k=l.next()){if(k=="\\"){l.next()}else{if(!d.test(k)){l.backUp(1);break}}}return l.current()}function b(n,m){if(n.eatSpace()){h="ws";return null}if(n.match(g)){return"number"}var l=n.next();if(l=="\\"){l=n.next()}if(l=='"'){return(m.tokenize=e)(n,m)}else{if(l=="("){h="open";return"bracket"}else{if(l==")"||l=="]"){h="close";return"bracket"}else{if(l==";"){n.skipToEnd();h="ws";return"comment"}else{if(/['`,@]/.test(l)){return null}else{if(l=="|"){if(n.skipTo("|")){n.next();return"symbol"}else{n.skipToEnd();return"error"}}else{if(l=="#"){var l=n.next();if(l=="["){h="open";return"bracket"}else{if(/[+\-=\.']/.test(l)){return null}else{if(/\d/.test(l)&&n.match(/^\d*#/)){return null}else{if(l=="|"){return(m.tokenize=i)(n,m)}else{if(l==":"){f(n);return"meta"}else{return"error"}}}}}}else{var k=f(n);if(k=="."){return null}h="symbol";if(k=="nil"||k=="t"){return"atom"}if(k.charAt(0)==":"){return"keyword"}if(k.charAt(0)=="&"){return"variable-2"}return"variable"}}}}}}}}function e(n,l){var m=false,k;while(k=n.next()){if(k=='"'&&!m){l.tokenize=b;break}m=!m&&k=="\\"}return"string"}function i(n,m){var k,l;while(k=n.next()){if(k=="#"&&l=="|"){m.tokenize=b;break}l=k}h="ws";return"comment"}return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},tokenize:b}},token:function(m,l){if(m.sol()&&typeof l.ctx.indentTo!="number"){l.ctx.indentTo=l.ctx.start+1}h=null;var k=l.tokenize(m,l);if(h!="ws"){if(l.ctx.indentTo==null){if(h=="symbol"&&j.test(m.current())){l.ctx.indentTo=l.ctx.start+c.indentUnit}else{l.ctx.indentTo="next"}}else{if(l.ctx.indentTo=="next"){l.ctx.indentTo=m.column()}}}if(h=="open"){l.ctx={prev:l.ctx,start:m.column(),indentTo:null}}else{if(h=="close"){l.ctx=l.ctx.prev||l.ctx}}return k},indent:function(m,k){var l=m.ctx.indentTo;return typeof l=="number"?l:m.ctx.start+1},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}});a.defineMIME("text/x-common-lisp","commonlisp")});