(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("lua",function(f,h){var j=f.indentUnit;function c(q){return new RegExp("^(?:"+q.join("|")+")","i")}function g(q){return new RegExp("^(?:"+q.join("|")+")$","i")}var m=g(h.specials||[]);var b=g(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]);var i=g(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]);var p=g(["function","if","repeat","do","\\(","{"]);var n=g(["end","until","\\)","}"]);var d=c(["end","until","\\)","}","else","elseif"]);function e(q){var r=0;while(q.eat("=")){++r}q.eat("[");return r}function l(s,r){var q=s.next();if(q=="-"&&s.eat("-")){if(s.eat("[")&&s.eat("[")){return(r.cur=o(e(s),"comment"))(s,r)}s.skipToEnd();return"comment"}if(q=='"'||q=="'"){return(r.cur=k(q))(s,r)}if(q=="["&&/[\[=]/.test(s.peek())){return(r.cur=o(e(s),"string"))(s,r)}if(/\d/.test(q)){s.eatWhile(/[\w.%]/);return"number"}if(/[\w_]/.test(q)){s.eatWhile(/[\w\\\-_.]/);return"variable"}return null}function o(r,q){return function(v,u){var s=null,t;while((t=v.next())!=null){if(s==null){if(t=="]"){s=0}}else{if(t=="="){++s}else{if(t=="]"&&s==r){u.cur=l;break}else{s=null}}}}return q}}function k(q){return function(u,s){var t=false,r;while((r=u.next())!=null){if(r==q&&!t){break}t=!t&&r=="\\"}if(!t){s.cur=l}return"string"}}return{startState:function(q){return{basecol:q||0,indentDepth:0,cur:l}},token:function(t,r){if(t.eatSpace()){return null}var q=r.cur(t,r);var s=t.current();if(q=="variable"){if(i.test(s)){q="keyword"}else{if(b.test(s)){q="builtin"}else{if(m.test(s)){q="variable-2"}}}}if((q!="comment")&&(q!="string")){if(p.test(s)){++r.indentDepth}else{if(n.test(s)){--r.indentDepth}}}return q},indent:function(s,q){var r=d.test(q);return s.basecol+j*(s.indentDepth-(r?1:0))},lineComment:"--",blockCommentStart:"--[[",blockCommentEnd:"]]"}});a.defineMIME("text/x-lua","lua")});