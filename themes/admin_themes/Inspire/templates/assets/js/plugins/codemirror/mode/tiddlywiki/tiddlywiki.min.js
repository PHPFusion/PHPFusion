(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("tiddlywiki",function(){var u={};var j=function(){function B(C){return{type:C,style:"macro"}}return{allTags:B("allTags"),closeAll:B("closeAll"),list:B("list"),newJournal:B("newJournal"),newTiddler:B("newTiddler"),permaview:B("permaview"),saveChanges:B("saveChanges"),search:B("search"),slider:B("slider"),tabs:B("tabs"),tag:B("tag"),tagging:B("tagging"),tags:B("tags"),tiddler:B("tiddler"),timeline:B("timeline"),today:B("today"),version:B("version"),option:B("option"),"with":B("with"),filter:B("filter")}}();var w=/[\w_\-]/i,o=/^\-\-\-\-+$/,h=/^\/\*\*\*$/,b=/^\*\*\*\/$/,r=/^<<<$/,g=/^\/\/\{\{\{$/,t=/^\/\/\}\}\}$/,m=/^<!--\{\{\{-->$/,A=/^<!--\}\}\}-->$/,v=/^\{\{\{$/,k=/^\}\}\}$/,e=/.*?\}\}\}/;function p(D,C,B){C.tokenize=B;return B(D,C)}var f,q;function y(D,C,B){f=D;q=B;return C}function n(G,E){var C=G.sol(),B;E.block=false;B=G.peek();if(C&&/[<\/\*{}\-]/.test(B)){if(G.match(v)){E.block=true;return p(G,E,s)}if(G.match(r)){return y("quote","quote")}if(G.match(h)||G.match(b)){return y("code","comment")}if(G.match(g)||G.match(t)||G.match(m)||G.match(A)){return y("code","comment")}if(G.match(o)){return y("hr","hr")}}B=G.next();if(C&&/[\/\*!#;:>|]/.test(B)){if(B=="!"){G.skipToEnd();return y("header","header")}if(B=="*"){G.eatWhile("*");return y("list","comment")}if(B=="#"){G.eatWhile("#");return y("list","comment")}if(B==";"){G.eatWhile(";");return y("list","comment")}if(B==":"){G.eatWhile(":");return y("list","comment")}if(B==">"){G.eatWhile(">");return y("quote","quote")}if(B=="|"){return y("table","header")}}if(B=="{"&&G.match(/\{\{/)){return p(G,E,s)}if(/[hf]/i.test(B)){if(/[ti]/i.test(G.peek())&&G.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i)){return y("link","link")}}if(B=='"'){return y("string","string")}if(B=="~"){return y("text","brace")}if(/[\[\]]/.test(B)){if(G.peek()==B){G.next();return y("brace","brace")}}if(B=="@"){G.eatWhile(w);return y("link","link")}if(/\d/.test(B)){G.eatWhile(/\d/);return y("number","number")}if(B=="/"){if(G.eat("%")){return p(G,E,c)}else{if(G.eat("/")){return p(G,E,x)}}}if(B=="_"){if(G.eat("_")){return p(G,E,d)}}if(B=="-"){if(G.eat("-")){if(G.peek()!=" "){return p(G,E,z)}if(G.peek()==" "){return y("text","brace")}}}if(B=="'"){if(G.eat("'")){return p(G,E,i)}}if(B=="<"){if(G.eat("<")){return p(G,E,l)}}else{return y(B)}G.eatWhile(/[\w\$_]/);var F=G.current(),D=u.propertyIsEnumerable(F)&&u[F];return D?y(D.type,D.style,F):y("text",null,F)}function c(E,D){var B=false,C;while(C=E.next()){if(C=="/"&&B){D.tokenize=n;break}B=(C=="%")}return y("comment","comment")}function i(E,D){var B=false,C;while(C=E.next()){if(C=="'"&&B){D.tokenize=n;break}B=(C=="'")}return y("text","strong")}function s(D,C){var B,E=C.block;if(E&&D.current()){return y("code","comment")}if(!E&&D.match(e)){C.tokenize=n;return y("code","comment")}if(E&&D.sol()&&D.match(k)){C.tokenize=n;return y("code","comment")}B=D.next();return(E)?y("code","comment"):y("code","comment")}function x(E,D){var B=false,C;while(C=E.next()){if(C=="/"&&B){D.tokenize=n;break}B=(C=="/")}return y("text","em")}function d(E,D){var B=false,C;while(C=E.next()){if(C=="_"&&B){D.tokenize=n;break}B=(C=="_")}return y("text","underlined")}function z(E,D){var B=false,C;while(C=E.next()){if(C=="-"&&B){D.tokenize=n;break}B=(C=="-")}return y("text","strikethrough")}function l(F,D){var B,E,C;if(F.current()=="<<"){return y("brace","macro")}B=F.next();if(!B){D.tokenize=n;return y(B)}if(B==">"){if(F.peek()==">"){F.next();D.tokenize=n;return y("brace","macro")}}F.eatWhile(/[\w\$_]/);E=F.current();C=j.propertyIsEnumerable(E)&&j[E];if(C){return y(C.type,C.style,E)}else{return y("macro",null,E)}}return{startState:function(){return{tokenize:n,indented:0,level:0}},token:function(D,C){if(D.eatSpace()){return null}var B=C.tokenize(D,C);return B},electricChars:""}});a.defineMIME("text/x-tiddlywiki","tiddlywiki")});