(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMIME("text/x-erlang","erlang");a.defineMode("erlang",function(u){var b=["-type","-spec","-export_type","-opaque"];var K=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"];var P=/[\->,;]/;var m=["->",";",","];var A=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"];var g=/[\+\-\*\/<>=\|:!]/;var x=["=","+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"];var z=/[<\(\[\{]/;var w=["<<","(","[","{"];var D=/[>\)\]\}]/;var E=["}","]",")",">>"];var r=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary","bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"];var l=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node","node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"];var J=/[\w@Ø-ÞÀ-Öß-öø-ÿ]/;var p=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;function j(U,T){if(T.in_string){T.in_string=(!B(U));return o(T,U,"string")}if(T.in_atom){T.in_atom=(!s(U));return o(T,U,"atom")}if(U.eatSpace()){return o(T,U,"whitespace")}if(!i(T)&&U.match(/-\s*[a-zß-öø-ÿ][\wØ-ÞÀ-Öß-öø-ÿ]*/)){if(F(U.current(),b)){return o(T,U,"type")}else{return o(T,U,"attribute")}}var S=U.next();if(S=="%"){U.skipToEnd();return o(T,U,"comment")}if(S==":"){return o(T,U,"colon")}if(S=="?"){U.eatSpace();U.eatWhile(J);return o(T,U,"macro")}if(S=="#"){U.eatSpace();U.eatWhile(J);return o(T,U,"record")}if(S=="$"){if(U.next()=="\\"&&!U.match(p)){return o(T,U,"error")}return o(T,U,"number")}if(S=="."){return o(T,U,"dot")}if(S=="'"){if(!(T.in_atom=(!s(U)))){if(U.match(/\s*\/\s*[0-9]/,false)){U.match(/\s*\/\s*[0-9]/,true);return o(T,U,"fun")}if(U.match(/\s*\(/,false)||U.match(/\s*:/,false)){return o(T,U,"function")}}return o(T,U,"atom")}if(S=='"'){T.in_string=(!B(U));return o(T,U,"string")}if(/[A-Z_Ø-ÞÀ-Ö]/.test(S)){U.eatWhile(J);return o(T,U,"variable")}if(/[a-z_ß-öø-ÿ]/.test(S)){U.eatWhile(J);if(U.match(/\s*\/\s*[0-9]/,false)){U.match(/\s*\/\s*[0-9]/,true);return o(T,U,"fun")}var d=U.current();if(F(d,K)){return o(T,U,"keyword")}else{if(F(d,A)){return o(T,U,"operator")}else{if(U.match(/\s*\(/,false)){if(F(d,l)&&((i(T).token!=":")||(i(T,2).token=="erlang"))){return o(T,U,"builtin")}else{if(F(d,r)){return o(T,U,"guard")}else{return o(T,U,"function")}}}else{if(F(d,A)){return o(T,U,"operator")}else{if(O(U)==":"){if(d=="erlang"){return o(T,U,"builtin")}else{return o(T,U,"function")}}else{if(F(d,["true","false"])){return o(T,U,"boolean")}else{if(F(d,["true","false"])){return o(T,U,"boolean")}else{return o(T,U,"atom")}}}}}}}}var Q=/[0-9]/;var R=/[0-9a-zA-Z]/;if(Q.test(S)){U.eatWhile(Q);if(U.eat("#")){if(!U.eatWhile(R)){U.backUp(1)}}else{if(U.eat(".")){if(!U.eatWhile(Q)){U.backUp(1)}else{if(U.eat(/[eE]/)){if(U.eat(/[-+]/)){if(!U.eatWhile(Q)){U.backUp(2)}}else{if(!U.eatWhile(Q)){U.backUp(1)}}}}}}return o(T,U,"number")}if(y(U,z,w)){return o(T,U,"open_paren")}if(y(U,D,E)){return o(T,U,"close_paren")}if(G(U,P,m)){return o(T,U,"separator")}if(G(U,g,x)){return o(T,U,"operator")}return o(T,U,null)}function y(R,d,Q){if(R.current().length==1&&d.test(R.current())){R.backUp(1);while(d.test(R.peek())){R.next();if(F(R.current(),Q)){return true}}R.backUp(R.current().length-1)}return false}function G(R,d,Q){if(R.current().length==1&&d.test(R.current())){while(d.test(R.peek())){R.next()}while(0<R.current().length){if(F(R.current(),Q)){return true}else{R.backUp(1)}}R.next()}return false}function B(d){return n(d,'"',"\\")}function s(d){return n(d,"'","\\")}function n(S,Q,d){while(!S.eol()){var R=S.next();if(R==Q){return true}else{if(R==d){S.next()}}}return false}function O(Q){var d=Q.match(/([\n\s]+|%[^\n]*\n)*(.)/,false);return d?d.pop():""}function F(d,Q){return(-1<Q.indexOf(d))}function o(Q,R,d){M(Q,v(d,R));switch(d){case"atom":return"atom";case"attribute":return"attribute";case"boolean":return"atom";case"builtin":return"builtin";case"close_paren":return null;case"colon":return null;case"comment":return"comment";case"dot":return null;case"error":return"error";case"fun":return"meta";case"function":return"tag";case"guard":return"property";case"keyword":return"keyword";case"macro":return"variable-2";case"number":return"number";case"open_paren":return null;case"operator":return"operator";case"record":return"bracket";case"separator":return null;case"string":return"string";case"type":return"def";case"variable":return"variable";default:return null}}function h(d,Q,S,R){return{token:d,column:Q,indent:S,type:R}}function v(d,Q){return h(Q.current(),Q.column(),Q.indentation(),d)}function t(d){return h(d,0,0,d)}function i(Q,S){var d=Q.tokenStack.length;var R=(S?S:1);if(d<R){return false}else{return Q.tokenStack[d-R]}}function M(Q,d){if(!(d.type=="comment"||d.type=="whitespace")){Q.tokenStack=q(Q.tokenStack,d);Q.tokenStack=I(Q.tokenStack)}}function q(Q,d){var R=Q.length-1;if(0<R&&Q[R].type==="record"&&d.type==="dot"){Q.pop()}else{if(0<R&&Q[R].type==="group"){Q.pop();Q.push(d)}else{Q.push(d)}}return Q}function I(d){var Q=d.length-1;if(d[Q].type==="dot"){return[]}if(d[Q].type==="fun"&&d[Q-1].token==="fun"){return d.slice(0,Q-1)}switch(d[d.length-1].token){case"}":return N(d,{g:["{"]});case"]":return N(d,{i:["["]});case")":return N(d,{i:["("]});case">>":return N(d,{i:["<<"]});case"end":return N(d,{i:["begin","case","fun","if","receive","try"]});case",":return N(d,{e:["begin","try","when","->",",","(","[","{","<<"]});case"->":return N(d,{r:["when"],m:["try","if","case","receive"]});case";":return N(d,{E:["case","fun","if","receive","try","when"]});case"catch":return N(d,{e:["try"]});case"of":return N(d,{e:["case"]});case"after":return N(d,{e:["receive","try"]});default:return d}}function N(Q,U){for(var T in U){var d=Q.length-1;var V=U[T];for(var S=d-1;-1<S;S--){if(F(Q[S].token,V)){var R=Q.slice(0,S);switch(T){case"m":return R.concat(Q[S]).concat(Q[d]);case"r":return R.concat(Q[d]);case"i":return R;case"g":return R.concat(t("group"));case"E":return R.concat(Q[S]);case"e":return R.concat(Q[S])}}}}return(T=="E"?[]:Q)}function e(V,Q){var R;var T=u.indentUnit;var S=c(Q);var U=i(V,1);var d=i(V,2);if(V.in_string||V.in_atom){return a.Pass}else{if(!d){return 0}else{if(U.token=="when"){return U.column+T}else{if(S==="when"&&d.type==="function"){return d.indent+T}else{if(S==="("&&U.token==="fun"){return U.column+3}else{if(S==="catch"&&(R=k(V,["try"]))){return R.column}else{if(F(S,["end","after","of"])){R=k(V,["begin","case","fun","if","receive","try"]);return R?R.column:a.Pass}else{if(F(S,E)){R=k(V,w);return R?R.column:a.Pass}else{if(F(U.token,[",","|","||"])||F(S,[",","|","||"])){R=L(V);return R?R.column+R.token.length:T}else{if(U.token=="->"){if(F(d.token,["receive","case","if","try"])){return d.column+T+T}else{return d.column+T}}else{if(F(U.token,w)){return U.column+U.token.length}else{R=H(V);return f(R)?R.column+T:0}}}}}}}}}}}}function c(Q){var d=Q.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/);return f(d)&&(d.index===0)?d[0]:""}function L(Q){var R=Q.tokenStack.slice(0,-1);var d=C(R,"type",["open_paren"]);return f(R[d])?R[d]:false}function H(Q){var R=Q.tokenStack;var d=C(R,"type",["open_paren","separator","keyword"]);var S=C(R,"type",["operator"]);if(f(d)&&f(S)&&d<S){return R[d+1]}else{if(f(d)){return R[d]}else{return false}}}function k(Q,R){var S=Q.tokenStack;var d=C(S,"token",R);return f(S[d])?S[d]:false}function C(R,S,d){for(var Q=R.length-1;-1<Q;Q--){if(F(R[Q][S],d)){return Q}}return false}function f(d){return(d!==false)&&(d!=null)}return{startState:function(){return{tokenStack:[],in_string:false,in_atom:false}},token:function(Q,d){return j(Q,d)},indent:function(Q,d){return e(Q,d)},lineComment:"%"}})});