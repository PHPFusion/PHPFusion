(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("q",function(c){var f=c.indentUnit,i,e=b(["abs","acos","aj","aj0","all","and","any","asc","asin","asof","atan","attr","avg","avgs","bin","by","ceiling","cols","cor","cos","count","cov","cross","csv","cut","delete","deltas","desc","dev","differ","distinct","div","do","each","ej","enlist","eval","except","exec","exit","exp","fby","fills","first","fkeys","flip","floor","from","get","getenv","group","gtime","hclose","hcount","hdel","hopen","hsym","iasc","idesc","if","ij","in","insert","inter","inv","key","keys","last","like","list","lj","load","log","lower","lsq","ltime","ltrim","mavg","max","maxs","mcount","md5","mdev","med","meta","min","mins","mmax","mmin","mmu","mod","msum","neg","next","not","null","or","over","parse","peach","pj","plist","prd","prds","prev","prior","rand","rank","ratios","raze","read0","read1","reciprocal","reverse","rload","rotate","rsave","rtrim","save","scan","select","set","setenv","show","signum","sin","sqrt","ss","ssr","string","sublist","sum","sums","sv","system","tables","tan","til","trim","txf","type","uj","ungroup","union","update","upper","upsert","value","var","view","views","vs","wavg","where","where","while","within","wj","wj1","wsum","xasc","xbar","xcol","xcols","xdesc","xexp","xgroup","xkey","xlog","xprev","xrank"]),n=/[|/&^!+:\\\-*%$=~#;@><,?_\'\"\[\(\]\)\s{}]/;function b(o){return new RegExp("^("+o.join("|")+")$")}function d(r,q){var p=r.sol(),s=r.next();i=null;if(p){if(s=="/"){return(q.tokenize=j)(r,q)}else{if(s=="\\"){if(r.eol()||/\s/.test(r.peek())){return r.skipToEnd(),/^\\\s*$/.test(r.current())?(q.tokenize=l)(r,q):q.tokenize=d,"comment"}else{return q.tokenize=d,"builtin"}}}}if(/\s/.test(s)){return r.peek()=="/"?(r.skipToEnd(),"comment"):"whitespace"}if(s=='"'){return(q.tokenize=k)(r,q)}if(s=="`"){return r.eatWhile(/[A-Z|a-z|\d|_|:|\/|\.]/),"symbol"}if(("."==s&&/\d/.test(r.peek()))||/\d/.test(s)){var o=null;r.backUp(1);if(r.match(/^\d{4}\.\d{2}(m|\.\d{2}([D|T](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)||r.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)||r.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)||r.match(/^\d+[ptuv]{1}/)){o="temporal"}else{if(r.match(/^0[NwW]{1}/)||r.match(/^0x[\d|a-f|A-F]*/)||r.match(/^[0|1]+[b]{1}/)||r.match(/^\d+[chijn]{1}/)||r.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/)){o="number"}}return(o&&(!(s=r.peek())||n.test(s)))?o:(r.next(),"error")}if(/[A-Z|a-z]|\./.test(s)){return r.eatWhile(/[A-Z|a-z|\.|_|\d]/),e.test(r.current())?"keyword":"variable"}if(/[|/&^!+:\\\-*%$=~#;@><\.,?_\']/.test(s)){return null}if(/[{}\(\[\]\)]/.test(s)){return null}return"error"}function j(p,o){return p.skipToEnd(),/\/\s*$/.test(p.current())?(o.tokenize=m)(p,o):(o.tokenize=d),"comment"}function m(q,p){var o=q.sol()&&q.peek()=="\\";q.skipToEnd();if(o&&/^\\\s*$/.test(q.current())){p.tokenize=d}return"comment"}function l(o){return o.skipToEnd(),"comment"}function k(s,q){var r=false,p,o=false;while((p=s.next())){if(p=='"'&&!r){o=true;break}r=!r&&p=="\\"}if(o){q.tokenize=d}return"string"}function g(q,p,o){q.context={prev:q.context,indent:q.indent,col:o,type:p}}function h(o){o.indent=o.context.indent;o.context=o.context.prev}return{startState:function(){return{tokenize:d,context:null,indent:0,col:0}},token:function(q,p){if(q.sol()){if(p.context&&p.context.align==null){p.context.align=false}p.indent=q.indentation()}var o=p.tokenize(q,p);if(o!="comment"&&p.context&&p.context.align==null&&p.context.type!="pattern"){p.context.align=true}if(i=="("){g(p,")",q.column())}else{if(i=="["){g(p,"]",q.column())}else{if(i=="{"){g(p,"}",q.column())}else{if(/[\]\}\)]/.test(i)){while(p.context&&p.context.type=="pattern"){h(p)}if(p.context&&i==p.context.type){h(p)}}else{if(i=="."&&p.context&&p.context.type=="pattern"){h(p)}else{if(/atom|string|variable/.test(o)&&p.context){if(/[\}\]]/.test(p.context.type)){g(p,"pattern",q.column())}else{if(p.context.type=="pattern"&&!p.context.align){p.context.align=true;p.context.col=q.column()}}}}}}}}return o},indent:function(s,o){var r=o&&o.charAt(0);var q=s.context;if(/[\]\}]/.test(r)){while(q&&q.type=="pattern"){q=q.prev}}var p=q&&r==q.type;if(!q){return 0}else{if(q.type=="pattern"){return q.col}else{if(q.align){return q.col+(p?0:1)}else{return q.indent+(p?0:f)}}}}}});a.defineMIME("text/x-q","q")});