(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../javascript/javascript"),require("../css/css"),require("../htmlmixed/htmlmixed"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../javascript/javascript","../css/css","../htmlmixed/htmlmixed"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("jade",function(L){var C="keyword";var W="meta";var z="builtin";var t="qualifier";var Y={"{":"}","(":")","[":"]"};var n=a.getMode(L,"javascript");function N(){this.javaScriptLine=false;this.javaScriptLineExcludesColon=false;this.javaScriptArguments=false;this.javaScriptArgumentsDepth=0;this.isInterpolating=false;this.interpolationNesting=0;this.jsState=n.startState();this.restOfLine="";this.isIncludeFiltered=false;this.isEach=false;this.lastTag="";this.scriptType="";this.isAttrs=false;this.attrsNest=[];this.inAttributeName=true;this.attributeIsType=false;this.attrValue="";this.indentOf=Infinity;this.indentToken="";this.innerMode=null;this.innerState=null;this.innerModeForLine=false}N.prototype.copy=function(){var aa=new N();aa.javaScriptLine=this.javaScriptLine;aa.javaScriptLineExcludesColon=this.javaScriptLineExcludesColon;aa.javaScriptArguments=this.javaScriptArguments;aa.javaScriptArgumentsDepth=this.javaScriptArgumentsDepth;aa.isInterpolating=this.isInterpolating;aa.interpolationNesting=this.intpolationNesting;aa.jsState=a.copyState(n,this.jsState);aa.innerMode=this.innerMode;if(this.innerMode&&this.innerState){aa.innerState=a.copyState(this.innerMode,this.innerState)}aa.restOfLine=this.restOfLine;aa.isIncludeFiltered=this.isIncludeFiltered;aa.isEach=this.isEach;aa.lastTag=this.lastTag;aa.scriptType=this.scriptType;aa.isAttrs=this.isAttrs;aa.attrsNest=this.attrsNest.slice();aa.inAttributeName=this.inAttributeName;aa.attributeIsType=this.attributeIsType;aa.attrValue=this.attrValue;aa.indentOf=this.indentOf;aa.indentToken=this.indentToken;aa.innerModeForLine=this.innerModeForLine;return aa};function x(ac,ab){if(ac.sol()){ab.javaScriptLine=false;ab.javaScriptLineExcludesColon=false}if(ab.javaScriptLine){if(ab.javaScriptLineExcludesColon&&ac.peek()===":"){ab.javaScriptLine=false;ab.javaScriptLineExcludesColon=false;return}var aa=n.token(ac,ab.jsState);if(ac.eol()){ab.javaScriptLine=false}return aa||true}}function w(ac,ab){if(ab.javaScriptArguments){if(ab.javaScriptArgumentsDepth===0&&ac.peek()!=="("){ab.javaScriptArguments=false;return}if(ac.peek()==="("){ab.javaScriptArgumentsDepth++}else{if(ac.peek()===")"){ab.javaScriptArgumentsDepth--}}if(ab.javaScriptArgumentsDepth===0){ab.javaScriptArguments=false;return}var aa=n.token(ac,ab.jsState);return aa||true}}function f(aa){if(aa.match(/^yield\b/)){return"keyword"}}function y(aa){if(aa.match(/^(?:doctype) *([^\n]+)?/)){return W}}function u(ab,aa){if(ab.match("#{")){aa.isInterpolating=true;aa.interpolationNesting=0;return"punctuation"}}function S(ab,aa){if(aa.isInterpolating){if(ab.peek()==="}"){aa.interpolationNesting--;if(aa.interpolationNesting<0){ab.next();aa.isInterpolating=false;return"puncutation"}}else{if(ab.peek()==="{"){aa.interpolationNesting++}}return n.token(ab,aa.jsState)||true}}function I(ab,aa){if(ab.match(/^case\b/)){aa.javaScriptLine=true;return C}}function K(ab,aa){if(ab.match(/^when\b/)){aa.javaScriptLine=true;aa.javaScriptLineExcludesColon=true;return C}}function s(aa){if(aa.match(/^default\b/)){return C}}function B(ab,aa){if(ab.match(/^extends?\b/)){aa.restOfLine="string";return C}}function M(ab,aa){if(ab.match(/^append\b/)){aa.restOfLine="variable";return C}}function O(ab,aa){if(ab.match(/^prepend\b/)){aa.restOfLine="variable";return C}}function k(ab,aa){if(ab.match(/^block\b *(?:(prepend|append)\b)?/)){aa.restOfLine="variable";return C}}function c(ab,aa){if(ab.match(/^include\b/)){aa.restOfLine="string";return C}}function V(ab,aa){if(ab.match(/^include:([a-zA-Z0-9\-]+)/,false)&&ab.match("include")){aa.isIncludeFiltered=true;return C}}function d(ac,ab){if(ab.isIncludeFiltered){var aa=H(ac,ab);ab.isIncludeFiltered=false;ab.restOfLine="string";return aa}}function X(ab,aa){if(ab.match(/^mixin\b/)){aa.javaScriptLine=true;return C}}function e(ab,aa){if(ab.match(/^\+([-\w]+)/)){if(!ab.match(/^\( *[-\w]+ *=/,false)){aa.javaScriptArguments=true;aa.javaScriptArgumentsDepth=0}return"variable"}if(ab.match(/^\+#{/,false)){ab.next();aa.mixinCallAfter=true;return u(ab,aa)}}function q(ab,aa){if(aa.mixinCallAfter){aa.mixinCallAfter=false;if(!ab.match(/^\( *[-\w]+ *=/,false)){aa.javaScriptArguments=true;aa.javaScriptArgumentsDepth=0}return true}}function v(ab,aa){if(ab.match(/^(if|unless|else if|else)\b/)){aa.javaScriptLine=true;return C}}function R(ab,aa){if(ab.match(/^(- *)?(each|for)\b/)){aa.isEach=true;return C}}function i(ab,aa){if(aa.isEach){if(ab.match(/^ in\b/)){aa.javaScriptLine=true;aa.isEach=false;return C}else{if(ab.sol()||ab.eol()){aa.isEach=false}else{if(ab.next()){while(!ab.match(/^ in\b/,false)&&ab.next()){}return"variable"}}}}}function m(ab,aa){if(ab.match(/^while\b/)){aa.javaScriptLine=true;return C}}function Q(ac,ab){var aa;if(aa=ac.match(/^(\w(?:[-:\w]*\w)?)\/?/)){ab.lastTag=aa[1].toLowerCase();if(ab.lastTag==="script"){ab.scriptType="application/javascript"}return"tag"}}function H(ac,ab){if(ac.match(/^:([\w\-]+)/)){var aa;if(L&&L.innerModes){aa=L.innerModes(ac.current().substring(1))}if(!aa){aa=ac.current().substring(1)}if(typeof aa==="string"){aa=a.getMode(L,aa)}h(ac,ab,aa);return"atom"}}function g(ab,aa){if(ab.match(/^(!?=|-)/)){aa.javaScriptLine=true;return"punctuation"}}function J(aa){if(aa.match(/^#([\w-]+)/)){return z}}function T(aa){if(aa.match(/^\.([\w-]+)/)){return t}}function j(ab,aa){if(ab.peek()=="("){ab.next();aa.isAttrs=true;aa.attrsNest=[];aa.inAttributeName=true;aa.attrValue="";aa.attributeIsType=false;return"punctuation"}}function A(ad,ac){if(ac.isAttrs){if(Y[ad.peek()]){ac.attrsNest.push(Y[ad.peek()])}if(ac.attrsNest[ac.attrsNest.length-1]===ad.peek()){ac.attrsNest.pop()}else{if(ad.eat(")")){ac.isAttrs=false;return"punctuation"}}if(ac.inAttributeName&&ad.match(/^[^=,\)!]+/)){if(ad.peek()==="="||ad.peek()==="!"){ac.inAttributeName=false;ac.jsState=n.startState();if(ac.lastTag==="script"&&ad.current().trim().toLowerCase()==="type"){ac.attributeIsType=true}else{ac.attributeIsType=false}}return"attribute"}var aa=n.token(ad,ac.jsState);if(ac.attributeIsType&&aa==="string"){ac.scriptType=ad.current().toString()}if(ac.attrsNest.length===0&&(aa==="string"||aa==="variable"||aa==="keyword")){try{Function("","var x "+ac.attrValue.replace(/,\s*$/,"").replace(/^!/,""));ac.inAttributeName=true;ac.attrValue="";ad.backUp(ad.current().length);return A(ad,ac)}catch(ab){}}ac.attrValue+=ad.current();return aa||true}}function r(ab,aa){if(ab.match(/^&attributes\b/)){aa.javaScriptArguments=true;aa.javaScriptArgumentsDepth=0;return"keyword"}}function o(aa){if(aa.sol()&&aa.eatSpace()){return"indent"}}function G(ab,aa){if(ab.match(/^ *\/\/(-)?([^\n]*)/)){aa.indentOf=ab.indentation();aa.indentToken="comment";return"comment"}}function E(aa){if(aa.match(/^: */)){return"colon"}}function D(ab,aa){if(ab.match(/^(?:\| ?| )([^\n]+)/)){return"string"}if(ab.match(/^(<[^\n]*)/,false)){h(ab,aa,"htmlmixed");aa.innerModeForLine=true;return F(ab,aa,true)}}function Z(ac,ab){if(ac.eat(".")){var aa=null;if(ab.lastTag==="script"&&ab.scriptType.toLowerCase().indexOf("javascript")!=-1){aa=ab.scriptType.toLowerCase().replace(/"|'/g,"")}else{if(ab.lastTag==="style"){aa="css"}}h(ac,ab,aa);return"dot"}}function l(aa){aa.next();return null}function h(ac,aa,ab){ab=a.mimeModes[ab]||ab;ab=L.innerModes?L.innerModes(ab)||ab:ab;ab=a.mimeModes[ab]||ab;ab=a.getMode(L,ab);aa.indentOf=ac.indentation();if(ab&&ab.name!=="null"){aa.innerMode=ab}else{aa.indentToken="string"}}function F(ac,ab,aa){if(ac.indentation()>ab.indentOf||(ab.innerModeForLine&&!ac.sol())||aa){if(ab.innerMode){if(!ab.innerState){ab.innerState=ab.innerMode.startState?ab.innerMode.startState(ac.indentation()):{}}return ac.hideFirstChars(ab.indentOf+2,function(){return ab.innerMode.token(ac,ab.innerState)||true})}else{ac.skipToEnd();return ab.indentToken}}else{if(ac.sol()){ab.indentOf=Infinity;ab.indentToken=null;ab.innerMode=null;ab.innerState=null}}}function U(ac,ab){if(ac.sol()){ab.restOfLine=""}if(ab.restOfLine){ac.skipToEnd();var aa=ab.restOfLine;ab.restOfLine="";return aa}}function P(){return new N()}function p(aa){return aa.copy()}function b(ac,ab){var aa=F(ac,ab)||U(ac,ab)||S(ac,ab)||d(ac,ab)||i(ac,ab)||A(ac,ab)||x(ac,ab)||w(ac,ab)||q(ac,ab)||f(ac,ab)||y(ac,ab)||u(ac,ab)||I(ac,ab)||K(ac,ab)||s(ac,ab)||B(ac,ab)||M(ac,ab)||O(ac,ab)||k(ac,ab)||c(ac,ab)||V(ac,ab)||X(ac,ab)||e(ac,ab)||v(ac,ab)||R(ac,ab)||m(ac,ab)||Q(ac,ab)||H(ac,ab)||g(ac,ab)||J(ac,ab)||T(ac,ab)||j(ac,ab)||r(ac,ab)||o(ac,ab)||D(ac,ab)||G(ac,ab)||E(ac,ab)||Z(ac,ab)||l(ac,ab);return aa===true?null:aa}return{startState:P,copyState:p,token:b}});a.defineMIME("text/x-jade","jade")});