/*!
 * # Semantic UI 2.4.2 - Dropdown
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(c,b,a,d){b=(typeof b!="undefined"&&b.Math==Math)?b:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();c.fn.dropdown=function(o){var m=c(this),h=c(a),j=m.selector||"",i=("ontouchstart" in a.documentElement),f=new Date().getTime(),l=[],k=arguments[0],e=(typeof k=="string"),n=[].slice.call(arguments,1),g;m.each(function(G){var X=(c.isPlainObject(o))?c.extend(true,{},c.fn.dropdown.settings,o):c.extend({},c.fn.dropdown.settings),W=X.className,C=X.message,p=X.fields,K=X.keys,s=X.metadata,R=X.namespace,z=X.regExp,y=X.selector,J=X.error,t=X.templates,v="."+R,r="module-"+R,A=c(this),S=c(X.context),P=A.find(y.text),q=A.find(y.search),Y=A.find(y.sizer),L=A.find(y.input),H=A.find(y.icon),D=(A.prev().find(y.text).length>0)?A.prev().find(y.text):A.prev(),x=A.children(y.menu),Q=x.find(y.item),N=false,U=false,B=false,E=this,T=A.data(r),Z,I,F,V,O,u,M,w;w={initialize:function(){w.debug("Initializing dropdown",X);if(w.is.alreadySetup()){w.setup.reference()}else{w.setup.layout();if(X.values){w.change.values(X.values)}w.refreshData();w.save.defaults();w.restore.selected();w.create.id();w.bind.events();w.observeChanges();w.instantiate()}},instantiate:function(){w.verbose("Storing instance of dropdown",w);T=w;A.data(r,w)},destroy:function(){w.verbose("Destroying previous dropdown",A);w.remove.tabbable();A.off(v).removeData(r);x.off(v);h.off(V);w.disconnect.menuObserver();w.disconnect.selectObserver()},observeChanges:function(){if("MutationObserver" in b){u=new MutationObserver(w.event.select.mutation);M=new MutationObserver(w.event.menu.mutation);w.debug("Setting up mutation observer",u,M);w.observe.select();w.observe.menu()}},disconnect:{menuObserver:function(){if(M){M.disconnect()}},selectObserver:function(){if(u){u.disconnect()}}},observe:{select:function(){if(w.has.input()){u.observe(A[0],{childList:true,subtree:true})}},menu:function(){if(w.has.menu()){M.observe(x[0],{childList:true,subtree:true})}}},create:{id:function(){O=(Math.random().toString(16)+"000000000").substr(2,8);V="."+O;w.verbose("Creating unique id for element",O)},userChoice:function(ab){var ae,ac,aa,ad;ab=ab||w.get.userValues();if(!ab){return false}ab=c.isArray(ab)?ab:[ab];c.each(ab,function(af,ag){if(w.get.item(ag)===false){ad=X.templates.addition(w.add.variables(C.addResult,ag));ac=c("<div />").html(ad).attr("data-"+s.value,ag).attr("data-"+s.text,ag).addClass(W.addition).addClass(W.item);if(X.hideAdditions){ac.addClass(W.hidden)}ae=(ae===d)?ac:ae.add(ac);w.verbose("Creating user choices for value",ag,ac)}});return ae},userLabels:function(ab){var aa=w.get.userValues();if(aa){w.debug("Adding user labels",aa);c.each(aa,function(ac,ad){w.verbose("Adding custom user value");w.add.label(ad,ad)})}},menu:function(){x=c("<div />").addClass(W.menu).appendTo(A)},sizer:function(){Y=c("<span />").addClass(W.sizer).insertAfter(q)}},search:function(aa){aa=(aa!==d)?aa:w.get.query();w.verbose("Searching for query",aa);if(w.has.minCharacters(aa)){w.filter(aa)}else{w.hide()}},select:{firstUnfiltered:function(){w.verbose("Selecting first non-filtered element");w.remove.selectedItem();Q.not(y.unselectable).not(y.addition+y.hidden).eq(0).addClass(W.selected)},nextAvailable:function(ac){ac=ac.eq(0);var ab=ac.nextAll(y.item).not(y.unselectable).eq(0),ad=ac.prevAll(y.item).not(y.unselectable).eq(0),aa=(ab.length>0);if(aa){w.verbose("Moving selection to",ab);ab.addClass(W.selected)}else{w.verbose("Moving selection to",ad);ad.addClass(W.selected)}}},setup:{api:function(){var aa={debug:X.debug,urlData:{value:w.get.value(),query:w.get.query()},on:false};w.verbose("First request, initializing API");A.api(aa)},layout:function(){if(A.is("select")){w.setup.select();w.setup.returnedObject()}if(!w.has.menu()){w.create.menu()}if(w.is.search()&&!w.has.search()){w.verbose("Adding search input");q=c("<input />").addClass(W.search).prop("autocomplete","off").insertBefore(P)}if(w.is.multiple()&&w.is.searchSelection()&&!w.has.sizer()){w.create.sizer()}if(X.allowTab){w.set.tabbable()}},select:function(){var aa=w.get.selectValues();w.debug("Dropdown initialized on a select",aa);if(A.is("select")){L=A}if(L.parent(y.dropdown).length>0){w.debug("UI dropdown already exists. Creating dropdown menu only");A=L.closest(y.dropdown);if(!w.has.menu()){w.create.menu()}x=A.children(y.menu);w.setup.menu(aa)}else{w.debug("Creating entire dropdown from select");A=c("<div />").attr("class",L.attr("class")).addClass(W.selection).addClass(W.dropdown).html(t.dropdown(aa)).insertBefore(L);if(L.hasClass(W.multiple)&&L.prop("multiple")===false){w.error(J.missingMultiple);L.prop("multiple",true)}if(L.is("[multiple]")){w.set.multiple()}if(L.prop("disabled")){w.debug("Disabling dropdown");A.addClass(W.disabled)}L.removeAttr("class").detach().prependTo(A)}w.refresh()},menu:function(aa){x.html(t.menu(aa,p));Q=x.find(y.item)},reference:function(){w.debug("Dropdown behavior was called on select, replacing with closest dropdown");A=A.parent(y.dropdown);T=A.data(r);E=A.get(0);w.refresh();w.setup.returnedObject()},returnedObject:function(){var ab=m.slice(0,G),aa=m.slice(G+1);m=ab.add(A).add(aa)}},refresh:function(){w.refreshSelectors();w.refreshData()},refreshItems:function(){Q=x.find(y.item)},refreshSelectors:function(){w.verbose("Refreshing selector cache");P=A.find(y.text);q=A.find(y.search);L=A.find(y.input);H=A.find(y.icon);D=(A.prev().find(y.text).length>0)?A.prev().find(y.text):A.prev();x=A.children(y.menu);Q=x.find(y.item)},refreshData:function(){w.verbose("Refreshing cached metadata");Q.removeData(s.text).removeData(s.value)},clearData:function(){w.verbose("Clearing metadata");Q.removeData(s.text).removeData(s.value);A.removeData(s.defaultText).removeData(s.defaultValue).removeData(s.placeholderText)},toggle:function(){w.verbose("Toggling menu visibility");if(!w.is.active()){w.show()}else{w.hide()}},show:function(aa){aa=c.isFunction(aa)?aa:function(){};if(!w.can.show()&&w.is.remote()){w.debug("No API results retrieved, searching before show");w.queryRemote(w.get.query(),w.show)}if(w.can.show()&&!w.is.active()){w.debug("Showing dropdown");if(w.has.message()&&!(w.has.maxSelections()||w.has.allResultsFiltered())){w.remove.message()}if(w.is.allFiltered()){return true}if(X.onShow.call(E)!==false){w.animate.show(function(){if(w.can.click()){w.bind.intent()}if(w.has.menuSearch()){w.focusSearch()}w.set.visible();aa.call(E)})}}},hide:function(aa){aa=c.isFunction(aa)?aa:function(){};if(w.is.active()&&!w.is.animatingOutward()){w.debug("Hiding dropdown");if(X.onHide.call(E)!==false){w.animate.hide(function(){w.remove.visible();aa.call(E)})}}},hideOthers:function(){w.verbose("Finding other dropdowns to hide");m.not(A).has(y.menu+"."+W.visible).dropdown("hide")},hideMenu:function(){w.verbose("Hiding menu  instantaneously");w.remove.active();w.remove.visible();x.transition("hide")},hideSubMenus:function(){var aa=x.children(y.item).find(y.menu);w.verbose("Hiding sub menus",aa);aa.transition("hide")},bind:{events:function(){if(i){w.bind.touchEvents()}w.bind.keyboardEvents();w.bind.inputEvents();w.bind.mouseEvents()},touchEvents:function(){w.debug("Touch device detected binding additional touch events");if(w.is.searchSelection()){}else{if(w.is.single()){A.on("touchstart"+v,w.event.test.toggle)}}x.on("touchstart"+v,y.item,w.event.item.mouseenter)},keyboardEvents:function(){w.verbose("Binding keyboard events");A.on("keydown"+v,w.event.keydown);if(w.has.search()){A.on(w.get.inputEvent()+v,y.search,w.event.input)}if(w.is.multiple()){h.on("keydown"+V,w.event.document.keydown)}},inputEvents:function(){w.verbose("Binding input change events");A.on("change"+v,y.input,w.event.change)},mouseEvents:function(){w.verbose("Binding mouse events");if(w.is.multiple()){A.on("click"+v,y.label,w.event.label.click).on("click"+v,y.remove,w.event.remove.click)}if(w.is.searchSelection()){A.on("mousedown"+v,w.event.mousedown).on("mouseup"+v,w.event.mouseup).on("mousedown"+v,y.menu,w.event.menu.mousedown).on("mouseup"+v,y.menu,w.event.menu.mouseup).on("click"+v,y.icon,w.event.icon.click).on("focus"+v,y.search,w.event.search.focus).on("click"+v,y.search,w.event.search.focus).on("blur"+v,y.search,w.event.search.blur).on("click"+v,y.text,w.event.text.focus);if(w.is.multiple()){A.on("click"+v,w.event.click)}}else{if(X.on=="click"){A.on("click"+v,w.event.test.toggle)}else{if(X.on=="hover"){A.on("mouseenter"+v,w.delay.show).on("mouseleave"+v,w.delay.hide)}else{A.on(X.on+v,w.toggle)}}A.on("click"+v,y.icon,w.event.icon.click).on("mousedown"+v,w.event.mousedown).on("mouseup"+v,w.event.mouseup).on("focus"+v,w.event.focus);if(w.has.menuSearch()){A.on("blur"+v,y.search,w.event.search.blur)}else{A.on("blur"+v,w.event.blur)}}x.on("mouseenter"+v,y.item,w.event.item.mouseenter).on("mouseleave"+v,y.item,w.event.item.mouseleave).on("click"+v,y.item,w.event.item.click)},intent:function(){w.verbose("Binding hide intent event to document");if(i){h.on("touchstart"+V,w.event.test.touch).on("touchmove"+V,w.event.test.touch)}h.on("click"+V,w.event.test.hide)}},unbind:{intent:function(){w.verbose("Removing hide intent event from document");if(i){h.off("touchstart"+V).off("touchmove"+V)}h.off("click"+V)}},filter:function(ac){var aa=(ac!==d)?ac:w.get.query(),ab=function(){if(w.is.multiple()){w.filterActive()}if(ac||(!ac&&w.get.activeItem().length==0)){w.select.firstUnfiltered()}if(w.has.allResultsFiltered()){if(X.onNoResults.call(E,aa)){if(X.allowAdditions){if(X.hideAdditions){w.verbose("User addition with no menu, setting empty style");w.set.empty();w.hideMenu()}}else{w.verbose("All items filtered, showing message",aa);w.add.message(C.noResults)}}else{w.verbose("All items filtered, hiding dropdown",aa);w.hideMenu()}}else{w.remove.empty();w.remove.message()}if(X.allowAdditions){w.add.userSuggestion(ac)}if(w.is.searchSelection()&&w.can.show()&&w.is.focusedOnSearch()){w.show()}};if(X.useLabels&&w.has.maxSelections()){return}if(X.apiSettings){if(w.can.useAPI()){w.queryRemote(aa,function(){if(X.filterRemoteData){w.filterItems(aa)}ab()})}else{w.error(J.noAPI)}}else{w.filterItems(aa);ab()}},queryRemote:function(ab,ac){var aa={errorDuration:false,cache:"local",throttle:X.throttle,urlData:{query:ab},onError:function(){w.add.message(C.serverError);ac()},onFailure:function(){w.add.message(C.serverError);ac()},onSuccess:function(ae){var ad=ae[p.remoteValues],af=(c.isArray(ad)&&ad.length>0);if(af){w.remove.message();w.setup.menu({values:ae[p.remoteValues]})}else{w.add.message(C.noResults)}ac()}};if(!A.api("get request")){w.setup.api()}aa=c.extend(true,{},aa,X.apiSettings);A.api("setting",aa).api("query")},filterItems:function(ae){var ab=(ae!==d)?ae:w.get.query(),ac=null,aa=w.escape.string(ab),ad=new RegExp("^"+aa,"igm");if(w.has.query()){ac=[];w.verbose("Searching for matching values",ab);Q.each(function(){var af=c(this),ah,ag;if(X.match=="both"||X.match=="text"){ah=String(w.get.choiceText(af,false));if(ah.search(ad)!==-1){ac.push(this);return true}else{if(X.fullTextSearch==="exact"&&w.exactSearch(ab,ah)){ac.push(this);return true}else{if(X.fullTextSearch===true&&w.fuzzySearch(ab,ah)){ac.push(this);return true}}}}if(X.match=="both"||X.match=="value"){ag=String(w.get.choiceValue(af,ah));if(ag.search(ad)!==-1){ac.push(this);return true}else{if(X.fullTextSearch==="exact"&&w.exactSearch(ab,ag)){ac.push(this);return true}else{if(X.fullTextSearch===true&&w.fuzzySearch(ab,ag)){ac.push(this);return true}}}}})}w.debug("Showing only matched items",ab);w.remove.filteredItem();if(ac){Q.not(ac).addClass(W.filtered)}},fuzzySearch:function(ae,ac){var ag=ac.length,ab=ae.length;ae=ae.toLowerCase();ac=ac.toLowerCase();if(ab>ag){return false}if(ab===ag){return(ae===ac)}search:for(var af=0,aa=0;af<ab;af++){var ad=ae.charCodeAt(af);while(aa<ag){if(ac.charCodeAt(aa++)===ad){continue search}}return false}return true},exactSearch:function(ab,aa){ab=ab.toLowerCase();aa=aa.toLowerCase();if(aa.indexOf(ab)>-1){return true}return false},filterActive:function(){if(X.useLabels){Q.filter("."+W.active).addClass(W.filtered)}},focusSearch:function(aa){if(w.has.search()&&!w.is.focusedOnSearch()){if(aa){A.off("focus"+v,y.search);q.focus();A.on("focus"+v,y.search,w.event.search.focus)}else{q.focus()}}},forceSelection:function(){var ab=Q.not(W.filtered).filter("."+W.selected).eq(0),ad=Q.not(W.filtered).filter("."+W.active).eq(0),ac=(ab.length>0)?ab:ad,aa=(ac.length>0);if(aa&&!w.is.multiple()){w.debug("Forcing partial selection to selected item",ac);w.event.item.click.call(ac,{},true);return}else{if(X.allowAdditions){w.set.selected(w.get.query());w.remove.searchTerm()}else{w.remove.searchTerm()}}},change:{values:function(aa){if(!X.allowAdditions){w.clear()}w.debug("Creating dropdown with specified values",aa);w.setup.menu({values:aa});c.each(aa,function(ab,ac){if(ac.selected==true){w.debug("Setting initial selection to",ac.value);w.set.selected(ac.value);return true}})}},event:{change:function(){if(!B){w.debug("Input changed, updating selection");w.set.selected()}},focus:function(){if(X.showOnFocus&&!N&&w.is.hidden()&&!I){w.show()}},blur:function(aa){I=(a.activeElement===this);if(!N&&!I){w.remove.activeLabel();w.hide()}},mousedown:function(){if(w.is.searchSelection()){F=true}else{N=true}},mouseup:function(){if(w.is.searchSelection()){F=false}else{N=false}},click:function(ab){var aa=c(ab.target);if(aa.is(A)){if(!w.is.focusedOnSearch()){w.focusSearch()}else{w.show()}}},search:{focus:function(){N=true;if(w.is.multiple()){w.remove.activeLabel()}if(X.showOnFocus){w.search()}},blur:function(aa){I=(a.activeElement===this);if(w.is.searchSelection()&&!F){if(!U&&!I){if(X.forceSelection){w.forceSelection()}w.hide()}}F=false}},icon:{click:function(aa){if(H.hasClass(W.clear)){w.clear()}else{if(w.can.click()){w.toggle()}}}},text:{focus:function(aa){N=true;w.focusSearch()}},input:function(aa){if(w.is.multiple()||w.is.searchSelection()){w.set.filtered()}clearTimeout(w.timer);w.timer=setTimeout(w.search,X.delay.search)},label:{click:function(af){var ab=c(this),ad=A.find(y.label),aa=ad.filter("."+W.active),ac=ab.nextAll("."+W.active),ae=ab.prevAll("."+W.active),ag=(ac.length>0)?ab.nextUntil(ac).add(aa).add(ab):ab.prevUntil(ae).add(aa).add(ab);if(af.shiftKey){aa.removeClass(W.active);ag.addClass(W.active)}else{if(af.ctrlKey){ab.toggleClass(W.active)}else{aa.removeClass(W.active);ab.addClass(W.active)}}X.onLabelSelect.apply(this,ad.filter("."+W.active))}},remove:{click:function(){var aa=c(this).parent();if(aa.hasClass(W.active)){w.remove.activeLabels()}else{w.remove.activeLabels(aa)}}},test:{toggle:function(ab){var aa=(w.is.multiple())?w.show:w.toggle;if(w.is.bubbledLabelClick(ab)||w.is.bubbledIconClick(ab)){return}if(w.determine.eventOnElement(ab,aa)){ab.preventDefault()}},touch:function(aa){w.determine.eventOnElement(aa,function(){if(aa.type=="touchstart"){w.timer=setTimeout(function(){w.hide()},X.delay.touch)}else{if(aa.type=="touchmove"){clearTimeout(w.timer)}}});aa.stopPropagation()},hide:function(aa){w.determine.eventInModule(aa,w.hide)}},select:{mutation:function(ab){w.debug("<select> modified, recreating menu");var aa=false;c.each(ab,function(ad,ac){if(c(ac.target).is("select")||c(ac.addedNodes).is("select")){aa=true;return true}});if(aa){w.disconnect.selectObserver();w.refresh();w.setup.select();w.set.selected();w.observe.select()}}},menu:{mutation:function(ab){var ad=ab[0],ae=ad.addedNodes?c(ad.addedNodes[0]):c(false),aa=ad.removedNodes?c(ad.removedNodes[0]):c(false),ac=ae.add(aa),ag=ac.is(y.addition)||ac.closest(y.addition).length>0,af=ac.is(y.message)||ac.closest(y.message).length>0;if(ag||af){w.debug("Updating item selector cache");w.refreshItems()}else{w.debug("Menu modified, updating selector cache");w.refresh()}},mousedown:function(){U=true},mouseup:function(){U=false}},item:{mouseenter:function(ae){var aa=c(ae.target),ab=c(this),ag=ab.children(y.menu),ac=ab.siblings(y.item).children(y.menu),af=(ag.length>0),ad=(ag.find(aa).length>0);if(!ad&&af){clearTimeout(w.itemTimer);w.itemTimer=setTimeout(function(){w.verbose("Showing sub-menu",ag);c.each(ac,function(){w.animate.hide(false,c(this))});w.animate.show(false,ag)},X.delay.show);ae.preventDefault()}},mouseleave:function(aa){var ab=c(this).children(y.menu);if(ab.length>0){clearTimeout(w.itemTimer);w.itemTimer=setTimeout(function(){w.verbose("Hiding sub-menu",ab);w.animate.hide(false,ab)},X.delay.hide)}},click:function(ab,ad){var ai=c(this),ac=(ab)?c(ab.target):c(""),af=ai.find(y.menu),ah=w.get.choiceText(ai),ae=w.get.choiceValue(ai,ah),aa=(af.length>0),ag=(af.find(ac).length>0);if(w.has.menuSearch()){c(a.activeElement).blur()}if(!ag&&(!aa||X.allowCategorySelection)){if(w.is.searchSelection()){if(X.allowAdditions){w.remove.userAddition()}w.remove.searchTerm();if(!w.is.focusedOnSearch()&&!(ad==true)){w.focusSearch(true)}}if(!X.useLabels){w.remove.filteredItem();w.set.scrollPosition(ai)}w.determine.selectAction.call(this,ah,ae)}}},document:{keydown:function(ab){var ao=ab.which,al=w.is.inObject(ao,K);if(al){var am=A.find(y.label),aq=am.filter("."+W.active),af=aq.data(s.value),aa=am.index(aq),ac=am.length,ag=(aq.length>0),ad=(aq.length>1),ap=(aa===0),an=(aa+1==ac),ak=w.is.searchSelection(),ah=w.is.focusedOnSearch(),ae=w.is.focused(),aj=(ah&&w.get.caretPosition()===0),ai;if(ak&&!ag&&!ah){return}if(ao==K.leftArrow){if((ae||aj)&&!ag){w.verbose("Selecting previous label");am.last().addClass(W.active)}else{if(ag){if(!ab.shiftKey){w.verbose("Selecting previous label");am.removeClass(W.active)}else{w.verbose("Adding previous label to selection")}if(ap&&!ad){aq.addClass(W.active)}else{aq.prev(y.siblingLabel).addClass(W.active).end()}ab.preventDefault()}}}else{if(ao==K.rightArrow){if(ae&&!ag){am.first().addClass(W.active)}if(ag){if(!ab.shiftKey){w.verbose("Selecting next label");am.removeClass(W.active)}else{w.verbose("Adding next label to selection")}if(an){if(ak){if(!ah){w.focusSearch()}else{am.removeClass(W.active)}}else{if(ad){aq.next(y.siblingLabel).addClass(W.active)}else{aq.addClass(W.active)}}}else{aq.next(y.siblingLabel).addClass(W.active)}ab.preventDefault()}}else{if(ao==K.deleteKey||ao==K.backspace){if(ag){w.verbose("Removing active labels");if(an){if(ak&&!ah){w.focusSearch()}}aq.last().next(y.siblingLabel).addClass(W.active);w.remove.activeLabels(aq);ab.preventDefault()}else{if(aj&&!ag&&ao==K.backspace){w.verbose("Removing last label on input backspace");aq=am.last().addClass(W.active);w.remove.activeLabels(aq)}}}else{aq.removeClass(W.active)}}}}}},keydown:function(al){var ad=al.which,aj=w.is.inObject(ad,K);if(aj){var af=Q.not(y.unselectable).filter("."+W.selected).eq(0),ar=x.children("."+W.active).eq(0),ap=(af.length>0)?af:ar,ah=(ap.length>0)?ap.siblings(":not(."+W.filtered+")").addBack():x.children(":not(."+W.filtered+")"),ac=ap.children(y.menu),ae=ap.closest(y.menu),aq=(ae.hasClass(W.visible)||ae.hasClass(W.animating)||ae.parent(y.menu).length>0),ao=(ac.length>0),an=(ap.length>0),ag=(ap.not(y.unselectable).length>0),am=(ad==K.delimiter&&X.allowAdditions&&w.is.multiple()),aa=(X.allowAdditions&&X.hideAdditions&&(ad==K.enter||am)&&ag),ai,ak,ab;if(aa){w.verbose("Selecting item from keyboard shortcut",ap);w.event.item.click.call(ap,al);if(w.is.searchSelection()){w.remove.searchTerm()}}if(w.is.visible()){if(ad==K.enter||am){if(ad==K.enter&&an&&ao&&!X.allowCategorySelection){w.verbose("Pressed enter on unselectable category, opening sub menu");ad=K.rightArrow}else{if(ag){w.verbose("Selecting item from keyboard shortcut",ap);w.event.item.click.call(ap,al);if(w.is.searchSelection()){w.remove.searchTerm()}}}al.preventDefault()}if(an){if(ad==K.leftArrow){ak=(ae[0]!==x[0]);if(ak){w.verbose("Left key pressed, closing sub-menu");w.animate.hide(false,ae);ap.removeClass(W.selected);ae.closest(y.item).addClass(W.selected);al.preventDefault()}}if(ad==K.rightArrow){if(ao){w.verbose("Right key pressed, opening sub-menu");w.animate.show(false,ac);ap.removeClass(W.selected);ac.find(y.item).eq(0).addClass(W.selected);al.preventDefault()}}}if(ad==K.upArrow){ai=(an&&aq)?ap.prevAll(y.item+":not("+y.unselectable+")").eq(0):Q.eq(0);if(ah.index(ai)<0){w.verbose("Up key pressed but reached top of current menu");al.preventDefault();return}else{w.verbose("Up key pressed, changing active item");ap.removeClass(W.selected);ai.addClass(W.selected);w.set.scrollPosition(ai);if(X.selectOnKeydown&&w.is.single()){w.set.selectedItem(ai)}}al.preventDefault()}if(ad==K.downArrow){ai=(an&&aq)?ai=ap.nextAll(y.item+":not("+y.unselectable+")").eq(0):Q.eq(0);if(ai.length===0){w.verbose("Down key pressed but reached bottom of current menu");al.preventDefault();return}else{w.verbose("Down key pressed, changing active item");Q.removeClass(W.selected);ai.addClass(W.selected);w.set.scrollPosition(ai);if(X.selectOnKeydown&&w.is.single()){w.set.selectedItem(ai)}}al.preventDefault()}if(ad==K.pageUp){w.scrollPage("up");al.preventDefault()}if(ad==K.pageDown){w.scrollPage("down");al.preventDefault()}if(ad==K.escape){w.verbose("Escape key pressed, closing dropdown");w.hide()}}else{if(am){al.preventDefault()}if(ad==K.downArrow&&!w.is.visible()){w.verbose("Down key pressed, showing dropdown");w.show();al.preventDefault()}}}else{if(!w.has.search()){w.set.selectedLetter(String.fromCharCode(ad))}}}},trigger:{change:function(){var aa=a.createEvent("HTMLEvents"),ab=L[0];if(ab){w.verbose("Triggering native change event");aa.initEvent("change",true,false);ab.dispatchEvent(aa)}}},determine:{selectAction:function(ab,aa){w.verbose("Determining action",X.action);if(c.isFunction(w.action[X.action])){w.verbose("Triggering preset action",X.action,ab,aa);w.action[X.action].call(E,ab,aa,this)}else{if(c.isFunction(X.action)){w.verbose("Triggering user action",X.action,ab,aa);X.action.call(E,ab,aa,this)}else{w.error(J.action,X.action)}}},eventInModule:function(ac,ae){var aa=c(ac.target),ab=(aa.closest(a.documentElement).length>0),ad=(aa.closest(A).length>0);ae=c.isFunction(ae)?ae:function(){};if(ab&&!ad){w.verbose("Triggering event",ae);ae();return true}else{w.verbose("Event occurred in dropdown, canceling callback");return false}},eventOnElement:function(ae,ag){var ab=c(ae.target),aa=ab.closest(y.siblingLabel),af=a.body.contains(ae.target),ad=(A.find(aa).length===0),ac=(ab.closest(x).length===0);ag=c.isFunction(ag)?ag:function(){};if(af&&ad&&ac){w.verbose("Triggering event",ag);ag();return true}else{w.verbose("Event occurred in dropdown menu, canceling callback");return false}}},action:{nothing:function(){},activate:function(ac,ab,aa){ab=(ab!==d)?ab:ac;if(w.can.activate(c(aa))){w.set.selected(ab,c(aa));if(w.is.multiple()&&!w.is.allFiltered()){return}else{w.hideAndClear()}}},select:function(ac,ab,aa){ab=(ab!==d)?ab:ac;if(w.can.activate(c(aa))){w.set.value(ab,ac,c(aa));if(w.is.multiple()&&!w.is.allFiltered()){return}else{w.hideAndClear()}}},combo:function(ac,ab,aa){ab=(ab!==d)?ab:ac;w.set.selected(ab,c(aa));w.hideAndClear()},hide:function(ac,ab,aa){w.set.value(ab,ac,c(aa));w.hideAndClear()}},get:{id:function(){return O},defaultText:function(){return A.data(s.defaultText)},defaultValue:function(){return A.data(s.defaultValue)},placeholderText:function(){if(X.placeholder!="auto"&&typeof X.placeholder=="string"){return X.placeholder}return A.data(s.placeholderText)||""},text:function(){return P.text()},query:function(){return c.trim(q.val())},searchWidth:function(aa){aa=(aa!==d)?aa:q.val();Y.text(aa);return Math.ceil(Y.width()+1)},selectionCount:function(){var aa=w.get.values(),ab;ab=(w.is.multiple())?c.isArray(aa)?aa.length:0:(w.get.value()!=="")?1:0;return ab},transition:function(aa){return(X.transition=="auto")?w.is.upward(aa)?"slide up":"slide down":X.transition},userValues:function(){var aa=w.get.values();if(!aa){return false}aa=c.isArray(aa)?aa:[aa];return c.grep(aa,function(ab){return(w.get.item(ab)===false)})},uniqueArray:function(aa){return c.grep(aa,function(ac,ab){return c.inArray(ac,aa)===ab})},caretPosition:function(){var ab=q.get(0),aa,ac;if("selectionStart" in ab){return ab.selectionStart}else{if(a.selection){ab.focus();aa=a.selection.createRange();ac=aa.text.length;aa.moveStart("character",-ab.value.length);return aa.text.length-ac}}},value:function(){var aa=(L.length>0)?L.val():A.data(s.value),ab=(c.isArray(aa)&&aa.length===1&&aa[0]==="");return(aa===d||ab)?"":aa},values:function(){var aa=w.get.value();if(aa===""){return""}return(!w.has.selectInput()&&w.is.multiple())?(typeof aa=="string")?aa.split(X.delimiter):"":aa},remoteValues:function(){var aa=w.get.values(),ab=false;if(aa){if(typeof aa=="string"){aa=[aa]}c.each(aa,function(ad,ae){var ac=w.read.remoteData(ae);w.verbose("Restoring value from session data",ac,ae);if(ac){if(!ab){ab={}}ab[ae]=ac}})}return ab},choiceText:function(ab,aa){aa=(aa!==d)?aa:X.preserveHTML;if(ab){if(ab.find(y.menu).length>0){w.verbose("Retrieving text of element with sub-menu");ab=ab.clone();ab.find(y.menu).remove();ab.find(y.menuIcon).remove()}return(ab.data(s.text)!==d)?ab.data(s.text):(aa)?c.trim(ab.html()):c.trim(ab.text())}},choiceValue:function(aa,ab){ab=ab||w.get.choiceText(aa);if(!aa){return false}return(aa.data(s.value)!==d)?String(aa.data(s.value)):(typeof ab==="string")?c.trim(ab.toLowerCase()):String(ab)},inputEvent:function(){var aa=q[0];if(aa){return(aa.oninput!==d)?"input":(aa.onpropertychange!==d)?"propertychange":"keyup"}return false},selectValues:function(){var aa={};aa.values=[];A.find("option").each(function(){var ae=c(this),ab=ae.html(),ac=ae.attr("disabled"),ad=(ae.attr("value")!==d)?ae.attr("value"):ab;if(X.placeholder==="auto"&&ad===""){aa.placeholder=ab}else{aa.values.push({name:ab,value:ad,disabled:ac})}});if(X.placeholder&&X.placeholder!=="auto"){w.debug("Setting placeholder value to",X.placeholder);aa.placeholder=X.placeholder}if(X.sortSelect){aa.values.sort(function(ac,ab){return(ac.name>ab.name)?1:-1});w.debug("Retrieved and sorted values from select",aa)}else{w.debug("Retrieved values from select",aa)}return aa},activeItem:function(){return Q.filter("."+W.active)},selectedItem:function(){var aa=Q.not(y.unselectable).filter("."+W.selected);return(aa.length>0)?aa:Q.eq(0)},itemWithAdditions:function(ab){var ad=w.get.item(ab),ac=w.create.userChoice(ab),aa=(ac&&ac.length>0);if(aa){ad=(ad.length>0)?ad.add(ac):ac}return ad},item:function(ad,aa){var ac=false,ae,ab;ad=(ad!==d)?ad:(w.get.values()!==d)?w.get.values():w.get.text();ae=(ab)?(ad.length>0):(ad!==d&&ad!==null);ab=(w.is.multiple()&&c.isArray(ad));aa=(ad===""||ad===0)?true:aa||false;if(ae){Q.each(function(){var af=c(this),ah=w.get.choiceText(af),ag=w.get.choiceValue(af,ah);if(ag===null||ag===d){return}if(ab){if(c.inArray(String(ag),ad)!==-1||c.inArray(ah,ad)!==-1){ac=(ac)?ac.add(af):af}}else{if(aa){w.verbose("Ambiguous dropdown value using strict type check",af,ad);if(ag===ad||ah===ad){ac=af;return true}}else{if(String(ag)==String(ad)||ah==ad){w.verbose("Found select item by value",ag,ad);ac=af;return true}}}})}return ac}},check:{maxSelections:function(aa){if(X.maxSelections){aa=(aa!==d)?aa:w.get.selectionCount();if(aa>=X.maxSelections){w.debug("Maximum selection count reached");if(X.useLabels){Q.addClass(W.filtered);w.add.message(C.maxSelections)}return true}else{w.verbose("No longer at maximum selection count");w.remove.message();w.remove.filteredItem();if(w.is.searchSelection()){w.filterItems()}return false}}return true}},restore:{defaults:function(){w.clear();w.restore.defaultText();w.restore.defaultValue()},defaultText:function(){var ab=w.get.defaultText(),aa=w.get.placeholderText;if(ab===aa){w.debug("Restoring default placeholder text",ab);w.set.placeholderText(ab)}else{w.debug("Restoring default text",ab);w.set.text(ab)}},placeholderText:function(){w.set.placeholderText()},defaultValue:function(){var aa=w.get.defaultValue();if(aa!==d){w.debug("Restoring default value",aa);if(aa!==""){w.set.value(aa);w.set.selected()}else{w.remove.activeItem();w.remove.selectedItem()}}},labels:function(){if(X.allowAdditions){if(!X.useLabels){w.error(J.labels);X.useLabels=true}w.debug("Restoring selected values");w.create.userLabels()}w.check.maxSelections()},selected:function(){w.restore.values();if(w.is.multiple()){w.debug("Restoring previously selected values and labels");w.restore.labels()}else{w.debug("Restoring previously selected values")}},values:function(){w.set.initialLoad();if(X.apiSettings&&X.saveRemoteData&&w.get.remoteValues()){w.restore.remoteValues()}else{w.set.selected()}w.remove.initialLoad()},remoteValues:function(){var aa=w.get.remoteValues();w.debug("Recreating selected from session data",aa);if(aa){if(w.is.single()){c.each(aa,function(ac,ab){w.set.text(ab)})}else{c.each(aa,function(ac,ab){w.add.label(ac,ab)})}}}},read:{remoteData:function(ab){var aa;if(b.Storage===d){w.error(J.noStorage);return}aa=sessionStorage.getItem(ab);return(aa!==d)?aa:false}},save:{defaults:function(){w.save.defaultText();w.save.placeholderText();w.save.defaultValue()},defaultValue:function(){var aa=w.get.value();w.verbose("Saving default value as",aa);A.data(s.defaultValue,aa)},defaultText:function(){var aa=w.get.text();w.verbose("Saving default text as",aa);A.data(s.defaultText,aa)},placeholderText:function(){var aa;if(X.placeholder!==false&&P.hasClass(W.placeholder)){aa=w.get.text();w.verbose("Saving placeholder text as",aa);A.data(s.placeholderText,aa)}},remoteData:function(aa,ab){if(b.Storage===d){w.error(J.noStorage);return}w.verbose("Saving remote data to session storage",ab,aa);sessionStorage.setItem(ab,aa)}},clear:function(){if(w.is.multiple()&&X.useLabels){w.remove.labels()}else{w.remove.activeItem();w.remove.selectedItem()}w.set.placeholderText();w.clearValue()},clearValue:function(){w.set.value("")},scrollPage:function(al,ac){var aj=ac||w.get.selectedItem(),ab=aj.closest(y.menu),af=ab.outerHeight(),ah=ab.scrollTop(),ag=Q.eq(0).outerHeight(),ad=Math.floor(af/ag),ak=ab.prop("scrollHeight"),am=(al=="up")?ah-(ag*ad):ah+(ag*ad),an=Q.not(y.unselectable),aa,ai,ae;ae=(al=="up")?an.index(aj)-ad:an.index(aj)+ad;aa=(al=="up")?(ae>=0):(ae<an.length);ai=(aa)?an.eq(ae):(al=="up")?an.first():an.last();if(ai.length>0){w.debug("Scrolling page",al,ai);aj.removeClass(W.selected);ai.addClass(W.selected);if(X.selectOnKeydown&&w.is.single()){w.set.selectedItem(ai)}ab.scrollTop(am)}},set:{filtered:function(){var af=w.is.multiple(),ab=w.is.searchSelection(),ac=(af&&ab),ae=(ab)?w.get.query():"",ag=(typeof ae==="string"&&ae.length>0),ad=w.get.searchWidth(),aa=ae!=="";if(af&&ag){w.verbose("Adjusting input width",ad,X.glyphWidth);q.css("width",ad)}if(ag||(ac&&aa)){w.verbose("Hiding placeholder text");P.addClass(W.filtered)}else{if(!af||(ac&&!aa)){w.verbose("Showing placeholder text");P.removeClass(W.filtered)}}},empty:function(){A.addClass(W.empty)},loading:function(){A.addClass(W.loading)},placeholderText:function(aa){aa=aa||w.get.placeholderText();w.debug("Setting placeholder text",aa);w.set.text(aa);P.addClass(W.placeholder)},tabbable:function(){if(w.is.searchSelection()){w.debug("Added tabindex to searchable dropdown");q.val("").attr("tabindex",0);x.attr("tabindex",-1)}else{w.debug("Added tabindex to dropdown");if(A.attr("tabindex")===d){A.attr("tabindex",0);x.attr("tabindex",-1)}}},initialLoad:function(){w.verbose("Setting initial load");Z=true},activeItem:function(aa){if(X.allowAdditions&&aa.filter(y.addition).length>0){aa.addClass(W.filtered)}else{aa.addClass(W.active)}},partialSearch:function(ab){var aa=w.get.query().length;q.val(ab.substr(0,aa))},scrollPosition:function(am,ad){var ak=5,ab,ag,ah,af,al,aj,ac,ae,aa,ai;am=am||w.get.selectedItem();ab=am.closest(y.menu);ag=(am&&am.length>0);ad=(ad!==d)?ad:false;if(am&&ab.length>0&&ag){al=am.position().top;ab.addClass(W.loading);ac=ab.scrollTop();aj=ab.offset().top;al=am.offset().top;ah=ac-aj+al;if(!ad){ae=ab.height();ai=ac+ae<(ah+ak);aa=((ah-ak)<ac)}w.debug("Scrolling to active item",ah);if(ad||aa||ai){ab.scrollTop(ah)}ab.removeClass(W.loading)}},text:function(aa){if(X.action!=="select"){if(X.action=="combo"){w.debug("Changing combo button text",aa,D);if(X.preserveHTML){D.html(aa)}else{D.text(aa)}}else{if(aa!==w.get.placeholderText()){P.removeClass(W.placeholder)}w.debug("Changing text",aa,P);P.removeClass(W.filtered);if(X.preserveHTML){P.html(aa)}else{P.text(aa)}}}},selectedItem:function(aa){var ac=w.get.choiceValue(aa),ab=w.get.choiceText(aa,false),ad=w.get.choiceText(aa,true);w.debug("Setting user selection to item",aa);w.remove.activeItem();w.set.partialSearch(ab);w.set.activeItem(aa);w.set.selected(ac,aa);w.set.text(ad)},selectedLetter:function(ac){var ad=Q.filter("."+W.selected),ab=ad.length>0&&w.has.firstLetter(ad,ac),aa=false,ae;if(ab){ae=ad.nextAll(Q).eq(0);if(w.has.firstLetter(ae,ac)){aa=ae}}if(!aa){Q.each(function(){if(w.has.firstLetter(c(this),ac)){aa=c(this);return false}})}if(aa){w.verbose("Scrolling to next value with letter",ac);w.set.scrollPosition(aa);ad.removeClass(W.selected);aa.addClass(W.selected);if(X.selectOnKeydown&&w.is.single()){w.set.selectedItem(aa)}}},direction:function(aa){if(X.direction=="auto"){w.remove.upward();if(w.can.openDownward(aa)){w.remove.upward(aa)}else{w.set.upward(aa)}if(!w.is.leftward(aa)&&!w.can.openRightward(aa)){w.set.leftward(aa)}}else{if(X.direction=="upward"){w.set.upward(aa)}}},upward:function(ab){var aa=ab||A;aa.addClass(W.upward)},leftward:function(ab){var aa=ab||x;aa.addClass(W.leftward)},value:function(ae,ag,ab){var ac=w.escape.value(ae),ah=(L.length>0),ad=w.get.values(),aa=(ae!==d)?String(ae):ae,af;if(ah){if(!X.allowReselection&&aa==ad){w.verbose("Skipping value update already same value",ae,ad);if(!w.is.initialLoad()){return}}if(w.is.single()&&w.has.selectInput()&&w.can.extendSelect()){w.debug("Adding user option",ae);w.add.optionValue(ae)}w.debug("Updating input value",ac,ad);B=true;L.val(ac);if(X.fireOnInit===false&&w.is.initialLoad()){w.debug("Input native change event ignored on initial load")}else{w.trigger.change()}B=false}else{w.verbose("Storing value in metadata",ac,L);if(ac!==ad){A.data(s.value,aa)}}if(w.is.single()&&X.clearable){if(!ac){w.remove.clearable()}else{w.set.clearable()}}if(X.fireOnInit===false&&w.is.initialLoad()){w.verbose("No callback on initial load",X.onChange)}else{X.onChange.call(E,ae,ag,ab)}},active:function(){A.addClass(W.active)},multiple:function(){A.addClass(W.multiple)},visible:function(){A.addClass(W.visible)},exactly:function(ab,aa){w.debug("Setting selected to exact values");w.clear();w.set.selected(ab,aa)},selected:function(ad,ac){var ab=w.is.multiple(),aa;ac=(X.allowAdditions)?ac||w.get.itemWithAdditions(ad):ac||w.get.item(ad);if(!ac){return}w.debug("Setting selected menu item to",ac);if(w.is.multiple()){w.remove.searchWidth()}if(w.is.single()){w.remove.activeItem();w.remove.selectedItem()}else{if(X.useLabels){w.remove.selectedItem()}}ac.each(function(){var ag=c(this),ak=w.get.choiceText(ag),ai=w.get.choiceValue(ag,ak),af=ag.hasClass(W.filtered),aj=ag.hasClass(W.active),ae=ag.hasClass(W.addition),ah=(ab&&ac.length==1);if(ab){if(!aj||ae){if(X.apiSettings&&X.saveRemoteData){w.save.remoteData(ak,ai)}if(X.useLabels){w.add.label(ai,ak,ah);w.add.value(ai,ak,ag);w.set.activeItem(ag);w.filterActive();w.select.nextAvailable(ac)}else{w.add.value(ai,ak,ag);w.set.text(w.add.variables(C.count));w.set.activeItem(ag)}}else{if(!af){w.debug("Selected active value, removing label");w.remove.selected(ai)}}}else{if(X.apiSettings&&X.saveRemoteData){w.save.remoteData(ak,ai)}w.set.text(ak);w.set.value(ai,ak,ag);ag.addClass(W.active).addClass(W.selected)}})},clearable:function(){H.addClass(W.clear)}},add:{label:function(ae,af,ad){var ab=w.is.searchSelection()?q:P,ac=w.escape.value(ae),aa;if(X.ignoreCase){ac=ac.toLowerCase()}aa=c("<a />").addClass(W.label).attr("data-"+s.value,ac).html(t.label(ac,af));aa=X.onLabelCreate.call(aa,ac,af);if(w.has.label(ae)){w.debug("User selection already exists, skipping",ac);return}if(X.label.variation){aa.addClass(X.label.variation)}if(ad===true){w.debug("Animating in label",aa);aa.addClass(W.hidden).insertBefore(ab).transition(X.label.transition,X.label.duration)}else{w.debug("Adding selection label",aa);aa.insertBefore(ab)}},message:function(ac){var aa=x.children(y.message),ab=X.templates.message(w.add.variables(ac));if(aa.length>0){aa.html(ab)}else{aa=c("<div/>").html(ab).addClass(W.message).appendTo(x)}},optionValue:function(ac){var ab=w.escape.value(ac),ad=L.find('option[value="'+w.escape.string(ab)+'"]'),aa=(ad.length>0);if(aa){return}w.disconnect.selectObserver();if(w.is.single()){w.verbose("Removing previous user addition");L.find("option."+W.addition).remove()}c("<option/>").prop("value",ab).addClass(W.addition).html(ac).appendTo(L);w.verbose("Adding user addition as an <option>",ac);w.observe.select()},userSuggestion:function(ac){var ae=x.children(y.addition),ab=w.get.item(ac),af=ab&&ab.not(y.addition).length,ad=ae.length>0,aa;if(X.useLabels&&w.has.maxSelections()){return}if(ac===""||af){ae.remove();return}if(ad){ae.data(s.value,ac).data(s.text,ac).attr("data-"+s.value,ac).attr("data-"+s.text,ac).removeClass(W.filtered);if(!X.hideAdditions){aa=X.templates.addition(w.add.variables(C.addResult,ac));ae.html(aa)}w.verbose("Replacing user suggestion with new value",ae)}else{ae=w.create.userChoice(ac);ae.prependTo(x);w.verbose("Adding item choice to menu corresponding with user choice addition",ae)}if(!X.hideAdditions||w.is.allFiltered()){ae.addClass(W.selected).siblings().removeClass(W.selected)}w.refreshItems()},variables:function(af,ad){var ac=(af.search("{count}")!==-1),ab=(af.search("{maxCount}")!==-1),ah=(af.search("{term}")!==-1),aa,ae,ag;w.verbose("Adding templated variables to message",af);if(ac){ae=w.get.selectionCount();af=af.replace("{count}",ae)}if(ab){ae=w.get.selectionCount();af=af.replace("{maxCount}",X.maxSelections)}if(ah){ag=ad||w.get.query();af=af.replace("{term}",ag)}return af},value:function(ae,aa,ac){var ab=w.get.values(),ad;if(w.has.value(ae)){w.debug("Value already selected");return}if(ae===""){w.debug("Cannot select blank values from multiselect");return}if(c.isArray(ab)){ad=ab.concat([ae]);ad=w.get.uniqueArray(ad)}else{ad=[ae]}if(w.has.selectInput()){if(w.can.extendSelect()){w.debug("Adding value to select",ae,ad,L);w.add.optionValue(ae)}}else{ad=ad.join(X.delimiter);w.debug("Setting hidden input to delimited value",ad,L)}if(X.fireOnInit===false&&w.is.initialLoad()){w.verbose("Skipping onadd callback on initial load",X.onAdd)}else{X.onAdd.call(E,ae,aa,ac)}w.set.value(ad,ae,aa,ac);w.check.maxSelections()}},remove:{active:function(){A.removeClass(W.active)},activeLabel:function(){A.find(y.label).removeClass(W.active)},empty:function(){A.removeClass(W.empty)},loading:function(){A.removeClass(W.loading)},initialLoad:function(){Z=false},upward:function(ab){var aa=ab||A;aa.removeClass(W.upward)},leftward:function(ab){var aa=ab||x;aa.removeClass(W.leftward)},visible:function(){A.removeClass(W.visible)},activeItem:function(){Q.removeClass(W.active)},filteredItem:function(){if(X.useLabels&&w.has.maxSelections()){return}if(X.useLabels&&w.is.multiple()){Q.not("."+W.active).removeClass(W.filtered)}else{Q.removeClass(W.filtered)}w.remove.empty()},optionValue:function(ac){var ab=w.escape.value(ac),ad=L.find('option[value="'+w.escape.string(ab)+'"]'),aa=(ad.length>0);if(!aa||!ad.hasClass(W.addition)){return}if(u){u.disconnect();w.verbose("Temporarily disconnecting mutation observer")}ad.remove();w.verbose("Removing user addition as an <option>",ab);if(u){u.observe(L[0],{childList:true,subtree:true})}},message:function(){x.children(y.message).remove()},searchWidth:function(){q.css("width","")},searchTerm:function(){w.verbose("Cleared search term");q.val("");w.set.filtered()},userAddition:function(){Q.filter(y.addition).remove()},selected:function(ab,aa){aa=(X.allowAdditions)?aa||w.get.itemWithAdditions(ab):aa||w.get.item(ab);if(!aa){return false}aa.each(function(){var ac=c(this),ae=w.get.choiceText(ac),ad=w.get.choiceValue(ac,ae);if(w.is.multiple()){if(X.useLabels){w.remove.value(ad,ae,ac);w.remove.label(ad)}else{w.remove.value(ad,ae,ac);if(w.get.selectionCount()===0){w.set.placeholderText()}else{w.set.text(w.add.variables(C.count))}}}else{w.remove.value(ad,ae,ac)}ac.removeClass(W.filtered).removeClass(W.active);if(X.useLabels){ac.removeClass(W.selected)}})},selectedItem:function(){Q.removeClass(W.selected)},value:function(ac,ae,aa){var ab=w.get.values(),ad;if(w.has.selectInput()){w.verbose("Input is <select> removing selected option",ac);ad=w.remove.arrayValue(ac,ab);w.remove.optionValue(ac)}else{w.verbose("Removing from delimited values",ac);ad=w.remove.arrayValue(ac,ab);ad=ad.join(X.delimiter)}if(X.fireOnInit===false&&w.is.initialLoad()){w.verbose("No callback on initial load",X.onRemove)}else{X.onRemove.call(E,ac,ae,aa)}w.set.value(ad,ae,aa);w.check.maxSelections()},arrayValue:function(ab,aa){if(!c.isArray(aa)){aa=[aa]}aa=c.grep(aa,function(ac){return(ab!=ac)});w.verbose("Removed value from delimited string",ab,aa);return aa},label:function(ad,ac){var ab=A.find(y.label),aa=ab.filter("[data-"+s.value+'="'+w.escape.string(ad)+'"]');w.verbose("Removing label",aa);aa.remove()},activeLabels:function(aa){aa=aa||A.find(y.label).filter("."+W.active);w.verbose("Removing active label selections",aa);w.remove.labels(aa)},labels:function(aa){aa=aa||A.find(y.label);w.verbose("Removing labels",aa);aa.each(function(){var ad=c(this),ae=ad.data(s.value),ac=(ae!==d)?String(ae):ae,ab=w.is.userValue(ac);if(X.onLabelRemove.call(ad,ae)===false){w.debug("Label remove callback cancelled removal");return}w.remove.message();if(ab){w.remove.value(ac);w.remove.label(ac)}else{w.remove.selected(ac)}})},tabbable:function(){if(w.is.searchSelection()){w.debug("Searchable dropdown initialized");q.removeAttr("tabindex");x.removeAttr("tabindex")}else{w.debug("Simple selection dropdown initialized");A.removeAttr("tabindex");x.removeAttr("tabindex")}},clearable:function(){H.removeClass(W.clear)}},has:{menuSearch:function(){return(w.has.search()&&q.closest(x).length>0)},search:function(){return(q.length>0)},sizer:function(){return(Y.length>0)},selectInput:function(){return(L.is("select"))},minCharacters:function(aa){if(X.minCharacters){aa=(aa!==d)?String(aa):String(w.get.query());return(aa.length>=X.minCharacters)}return true},firstLetter:function(aa,ab){var ad,ac;if(!aa||aa.length===0||typeof ab!=="string"){return false}ad=w.get.choiceText(aa,false);ab=ab.toLowerCase();ac=String(ad).charAt(0).toLowerCase();return(ab==ac)},input:function(){return(L.length>0)},items:function(){return(Q.length>0)},menu:function(){return(x.length>0)},message:function(){return(x.children(y.message).length!==0)},label:function(ac){var ab=w.escape.value(ac),aa=A.find(y.label);if(X.ignoreCase){ab=ab.toLowerCase()}return(aa.filter("[data-"+s.value+'="'+w.escape.string(ab)+'"]').length>0)},maxSelections:function(){return(X.maxSelections&&w.get.selectionCount()>=X.maxSelections)},allResultsFiltered:function(){var aa=Q.not(y.addition);return(aa.filter(y.unselectable).length===aa.length)},userSuggestion:function(){return(x.children(y.addition).length>0)},query:function(){return(w.get.query()!=="")},value:function(aa){return(X.ignoreCase)?w.has.valueIgnoringCase(aa):w.has.valueMatchingCase(aa)},valueMatchingCase:function(ac){var aa=w.get.values(),ab=c.isArray(aa)?aa&&(c.inArray(ac,aa)!==-1):(aa==ac);return(ab)?true:false},valueIgnoringCase:function(ac){var aa=w.get.values(),ab=false;if(!c.isArray(aa)){aa=[aa]}c.each(aa,function(ad,ae){if(String(ac).toLowerCase()==String(ae).toLowerCase()){ab=true;return false}});return ab}},is:{active:function(){return A.hasClass(W.active)},animatingInward:function(){return x.transition("is inward")},animatingOutward:function(){return x.transition("is outward")},bubbledLabelClick:function(aa){return c(aa.target).is("select, input")&&A.closest("label").length>0},bubbledIconClick:function(aa){return c(aa.target).closest(H).length>0},alreadySetup:function(){return(A.is("select")&&A.parent(y.dropdown).data(r)!==d&&A.prev().length===0)},animating:function(aa){return(aa)?aa.transition&&aa.transition("is animating"):x.transition&&x.transition("is animating")},leftward:function(ab){var aa=ab||x;return aa.hasClass(W.leftward)},disabled:function(){return A.hasClass(W.disabled)},focused:function(){return(a.activeElement===A[0])},focusedOnSearch:function(){return(a.activeElement===q[0])},allFiltered:function(){return((w.is.multiple()||w.has.search())&&!(X.hideAdditions==false&&w.has.userSuggestion())&&!w.has.message()&&w.has.allResultsFiltered())},hidden:function(aa){return !w.is.visible(aa)},initialLoad:function(){return Z},inObject:function(ac,aa){var ab=false;c.each(aa,function(ad,ae){if(ae==ac){ab=true;return true}});return ab},multiple:function(){return A.hasClass(W.multiple)},remote:function(){return X.apiSettings&&w.can.useAPI()},single:function(){return !w.is.multiple()},selectMutation:function(aa){var ab=false;c.each(aa,function(ad,ac){if(ac.target&&c(ac.target).is("select")){ab=true;return true}});return ab},search:function(){return A.hasClass(W.search)},searchSelection:function(){return(w.has.search()&&q.parent(y.dropdown).length===1)},selection:function(){return A.hasClass(W.selection)},userValue:function(aa){return(c.inArray(aa,w.get.userValues())!==-1)},upward:function(ab){var aa=ab||A;return aa.hasClass(W.upward)},visible:function(aa){return(aa)?aa.hasClass(W.visible):x.hasClass(W.visible)},verticallyScrollableContext:function(){var aa=(S.get(0)!==b)?S.css("overflow-y"):false;return(aa=="auto"||aa=="scroll")},horizontallyScrollableContext:function(){var aa=(S.get(0)!==b)?S.css("overflow-X"):false;return(aa=="auto"||aa=="scroll")}},can:{activate:function(aa){if(X.useLabels){return true}if(!w.has.maxSelections()){return true}if(w.has.maxSelections()&&aa.hasClass(W.active)){return true}return false},openDownward:function(ae){var ab=ae||x,ac=true,ad={},aa;ab.addClass(W.loading);aa={context:{offset:(S.get(0)===b)?{top:0,left:0}:S.offset(),scrollTop:S.scrollTop(),height:S.outerHeight()},menu:{offset:ab.offset(),height:ab.outerHeight()}};if(w.is.verticallyScrollableContext()){aa.menu.offset.top+=aa.context.scrollTop}ad={above:(aa.context.scrollTop)<=aa.menu.offset.top-aa.context.offset.top-aa.menu.height,below:(aa.context.scrollTop+aa.context.height)>=aa.menu.offset.top-aa.context.offset.top+aa.menu.height};if(ad.below){w.verbose("Dropdown can fit in context downward",ad);ac=true}else{if(!ad.below&&!ad.above){w.verbose("Dropdown cannot fit in either direction, favoring downward",ad);ac=true}else{w.verbose("Dropdown cannot fit below, opening upward",ad);ac=false}}ab.removeClass(W.loading);return ac},openRightward:function(ae){var ab=ae||x,ad=true,ac=false,aa;ab.addClass(W.loading);aa={context:{offset:(S.get(0)===b)?{top:0,left:0}:S.offset(),scrollLeft:S.scrollLeft(),width:S.outerWidth()},menu:{offset:ab.offset(),width:ab.outerWidth()}};if(w.is.horizontallyScrollableContext()){aa.menu.offset.left+=aa.context.scrollLeft}ac=(aa.menu.offset.left-aa.context.offset.left+aa.menu.width>=aa.context.scrollLeft+aa.context.width);if(ac){w.verbose("Dropdown cannot fit in context rightward",ac);ad=false}ab.removeClass(W.loading);return ad},click:function(){return(i||X.on=="click")},extendSelect:function(){return X.allowAdditions||X.apiSettings},show:function(){return !w.is.disabled()&&(w.has.items()||w.has.message())},useAPI:function(){return c.fn.api!==d}},animate:{show:function(ae,ad){var aa=ad||x,ac=(ad)?function(){}:function(){w.hideSubMenus();w.hideOthers();w.set.active()},ab;ae=c.isFunction(ae)?ae:function(){};w.verbose("Doing menu show animation",aa);w.set.direction(ad);ab=w.get.transition(ad);if(w.is.selection()){w.set.scrollPosition(w.get.selectedItem(),true)}if(w.is.hidden(aa)||w.is.animating(aa)){if(ab=="none"){ac();aa.transition("show");ae.call(E)}else{if(c.fn.transition!==d&&A.transition("is supported")){aa.transition({animation:ab+" in",debug:X.debug,verbose:X.verbose,duration:X.duration,queue:true,onStart:ac,onComplete:function(){ae.call(E)}})}else{w.error(J.noTransition,ab)}}}},hide:function(af,ae){var aa=ae||x,ab=(ae)?(X.duration*0.9):X.duration,ad=(ae)?function(){}:function(){if(w.can.click()){w.unbind.intent()}w.remove.active()},ac=w.get.transition(ae);af=c.isFunction(af)?af:function(){};if(w.is.visible(aa)||w.is.animating(aa)){w.verbose("Doing menu hide animation",aa);if(ac=="none"){ad();aa.transition("hide");af.call(E)}else{if(c.fn.transition!==d&&A.transition("is supported")){aa.transition({animation:ac+" out",duration:X.duration,debug:X.debug,verbose:X.verbose,queue:false,onStart:ad,onComplete:function(){af.call(E)}})}else{w.error(J.transition)}}}}},hideAndClear:function(){w.remove.searchTerm();if(w.has.maxSelections()){return}if(w.has.search()){w.hide(function(){w.remove.filteredItem()})}else{w.hide()}},delay:{show:function(){w.verbose("Delaying show event to ensure user intent");clearTimeout(w.timer);w.timer=setTimeout(w.show,X.delay.show)},hide:function(){w.verbose("Delaying hide event to ensure user intent");clearTimeout(w.timer);w.timer=setTimeout(w.hide,X.delay.hide)}},escape:{value:function(af){var ad=c.isArray(af),aa=(typeof af==="string"),ac=(!aa&&!ad),ae=(aa&&af.search(z.quote)!==-1),ab=[];if(ac||!ae){return af}w.debug("Encoding quote values for use in select",af);if(ad){c.each(af,function(ag,ah){ab.push(ah.replace(z.quote,"&quot;"))});return ab}return af.replace(z.quote,"&quot;")},string:function(aa){aa=String(aa);return aa.replace(z.escape,"\\$&")}},setting:function(aa,ab){w.debug("Changing setting",aa,ab);if(c.isPlainObject(aa)){c.extend(true,X,aa)}else{if(ab!==d){if(c.isPlainObject(X[aa])){c.extend(true,X[aa],ab)}else{X[aa]=ab}}else{return X[aa]}}},internal:function(aa,ab){if(c.isPlainObject(aa)){c.extend(true,w,aa)}else{if(ab!==d){w[aa]=ab}else{return w[aa]}}},debug:function(){if(!X.silent&&X.debug){if(X.performance){w.performance.log(arguments)}else{w.debug=Function.prototype.bind.call(console.info,console,X.name+":");w.debug.apply(console,arguments)}}},verbose:function(){if(!X.silent&&X.verbose&&X.debug){if(X.performance){w.performance.log(arguments)}else{w.verbose=Function.prototype.bind.call(console.info,console,X.name+":");w.verbose.apply(console,arguments)}}},error:function(){if(!X.silent){w.error=Function.prototype.bind.call(console.error,console,X.name+":");w.error.apply(console,arguments)}},performance:{log:function(ac){var ab,ad,aa;if(X.performance){ab=new Date().getTime();aa=f||ab;ad=ab-aa;f=ab;l.push({Name:ac[0],Arguments:[].slice.call(ac,1)||"",Element:E,"Execution Time":ad})}clearTimeout(w.performance.timer);w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var ab=X.name+":",aa=0;f=false;clearTimeout(w.performance.timer);c.each(l,function(ac,ad){aa+=ad["Execution Time"]});ab+=" "+aa+"ms";if(j){ab+=" '"+j+"'"}if((console.group!==d||console.table!==d)&&l.length>0){console.groupCollapsed(ab);if(console.table){console.table(l)}else{c.each(l,function(ac,ad){console.log(ad.Name+": "+ad["Execution Time"]+"ms")})}console.groupEnd()}l=[]}},invoke:function(af,ab,ad){var ac=T,ag,ae,aa;ab=ab||n;ad=E||ad;if(typeof af=="string"&&ac!==d){af=af.split(/[\. ]/);ag=af.length-1;c.each(af,function(aj,ai){var ah=(aj!=ag)?ai+af[aj+1].charAt(0).toUpperCase()+af[aj+1].slice(1):af;if(c.isPlainObject(ac[ah])&&(aj!=ag)){ac=ac[ah]}else{if(ac[ah]!==d){ae=ac[ah];return false}else{if(c.isPlainObject(ac[ai])&&(aj!=ag)){ac=ac[ai]}else{if(ac[ai]!==d){ae=ac[ai];return false}else{w.error(J.method,af);return false}}}}})}if(c.isFunction(ae)){aa=ae.apply(ad,ab)}else{if(ae!==d){aa=ae}}if(c.isArray(g)){g.push(aa)}else{if(g!==d){g=[g,aa]}else{if(aa!==d){g=aa}}}return ae}};if(e){if(T===d){w.initialize()}w.invoke(k)}else{if(T!==d){T.invoke("destroy")}w.initialize()}});return(g!==d)?g:m};c.fn.dropdown.settings={silent:false,debug:false,verbose:false,performance:true,on:"click",action:"activate",values:false,clearable:false,apiSettings:false,selectOnKeydown:true,minCharacters:0,filterRemoteData:false,saveRemoteData:true,throttle:200,context:b,direction:"auto",keepOnScreen:true,match:"both",fullTextSearch:false,placeholder:"auto",preserveHTML:true,sortSelect:false,forceSelection:true,allowAdditions:false,ignoreCase:false,hideAdditions:true,maxSelections:false,useLabels:true,delimiter:",",showOnFocus:true,allowReselection:false,allowTab:true,allowCategorySelection:false,fireOnInit:false,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:false},delay:{hide:300,show:200,search:20,touch:50},onChange:function(f,g,e){},onAdd:function(f,g,e){},onRemove:function(f,g,e){},onLabelSelect:function(e){},onLabelCreate:function(e,f){return c(this)},onLabelRemove:function(e){return true},onNoResults:function(e){return true},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",clear:"clear",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}};c.fn.dropdown.settings.templates={dropdown:function(e){var h=e.placeholder||false,f=e.values||{},g="";g+='<i class="dropdown icon"></i>';if(e.placeholder){g+='<div class="default text">'+h+"</div>"}else{g+='<div class="text"></div>'}g+='<div class="menu">';c.each(e.values,function(i,j){g+=(j.disabled)?'<div class="disabled item" data-value="'+j.value+'">'+j.name+"</div>":'<div class="item" data-value="'+j.value+'">'+j.name+"</div>"});g+="</div>";return g},menu:function(g,e){var f=g[e.values]||{},h="";c.each(f,function(j,k){var l=(k[e.text])?'data-text="'+k[e.text]+'"':"",i=(k[e.disabled])?"disabled ":"";h+='<div class="'+i+'item" data-value="'+k[e.value]+'"'+l+">";h+=k[e.name];h+="</div>"});return h},label:function(e,f){return f+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}})(jQuery,window,document);