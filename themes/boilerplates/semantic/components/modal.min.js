/*!
 * # Semantic UI 2.4.2 - Modal
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(c,b,a,d){b=(typeof b!="undefined"&&b.Math==Math)?b:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();c.fn.modal=function(q){var o=c(this),f=c(b),i=c(a),j=c("body"),l=o.selector||"",g=new Date().getTime(),n=[],m=arguments[0],e=(typeof m=="string"),p=[].slice.call(arguments,1),k=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(r){setTimeout(r,0)},h;o.each(function(){var J=(c.isPlainObject(q))?c.extend(true,{},c.fn.modal.settings,q):c.extend({},c.fn.modal.settings),I=J.selector,u=J.className,z=J.namespace,G=J.error,D="."+z,A="module-"+z,w=c(this),C=c(J.context),v=w.find(I.close),M,y,F,x,E,t=this,K=w.data(A),r=false,L,B,H,s;s={initialize:function(){s.verbose("Initializing dimmer",C);s.create.id();s.create.dimmer();s.refreshModals();s.bind.events();if(J.observeChanges){s.observeChanges()}s.instantiate()},instantiate:function(){s.verbose("Storing instance of modal");K=s;w.data(A,K)},create:{dimmer:function(){var N={debug:J.debug,variation:J.centered?false:"top aligned",dimmerName:"modals"},O=c.extend(true,N,J.dimmerSettings);if(c.fn.dimmer===d){s.error(G.dimmer);return}s.debug("Creating dimmer");x=C.dimmer(O);if(J.detachable){s.verbose("Modal is detachable, moving content into dimmer");x.dimmer("add content",w)}else{s.set.undetached()}E=x.dimmer("get dimmer")},id:function(){B=(Math.random().toString(16)+"000000000").substr(2,8);L="."+B;s.verbose("Creating unique id for element",B)}},destroy:function(){s.verbose("Destroying previous modal");w.removeData(A).off(D);f.off(L);E.off(L);v.off(D);C.dimmer("destroy")},observeChanges:function(){if("MutationObserver" in b){H=new MutationObserver(function(N){s.debug("DOM tree modified, refreshing");s.refresh()});H.observe(t,{childList:true,subtree:true});s.debug("Setting up mutation observer",H)}},refresh:function(){s.remove.scrolling();s.cacheSizes();if(!s.can.useFlex()){s.set.modalOffset()}s.set.screenHeight();s.set.type()},refreshModals:function(){y=w.siblings(I.modal);M=y.add(w)},attachEvents:function(N,P){var O=c(N);P=c.isFunction(s[P])?s[P]:s.toggle;if(O.length>0){s.debug("Attaching modal events to element",N,P);O.off(D).on("click"+D,P)}else{s.error(G.notFound,N)}},bind:{events:function(){s.verbose("Attaching events");w.on("click"+D,I.close,s.event.close).on("click"+D,I.approve,s.event.approve).on("click"+D,I.deny,s.event.deny);f.on("resize"+L,s.event.resize)},scrollLock:function(){x.get(0).addEventListener("touchmove",s.event.preventScroll,{passive:false})}},unbind:{scrollLock:function(){x.get(0).removeEventListener("touchmove",s.event.preventScroll,{passive:false})}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){if(r||J.onApprove.call(t,c(this))===false){s.verbose("Approve callback returned false cancelling hide");return}r=true;s.hide(function(){r=false})},preventScroll:function(N){N.preventDefault()},deny:function(){if(r||J.onDeny.call(t,c(this))===false){s.verbose("Deny callback returned false cancelling hide");return}r=true;s.hide(function(){r=false})},close:function(){s.hide()},click:function(Q){if(!J.closable){s.verbose("Dimmer clicked but closable setting is disabled");return}var O=c(Q.target),P=(O.closest(I.modal).length>0),N=c.contains(a.documentElement,Q.target);if(!P&&N&&s.is.active()){s.debug("Dimmer clicked, hiding all modals");s.remove.clickaway();if(J.allowMultiple){s.hide()}else{s.hideAll()}}},debounce:function(O,N){clearTimeout(s.timer);s.timer=setTimeout(O,N)},keyboard:function(O){var P=O.which,N=27;if(P==N){if(J.closable){s.debug("Escape key pressed hiding modal");s.hide()}else{s.debug("Escape key pressed, but closable is set to false")}O.preventDefault()}},resize:function(){if(x.dimmer("is active")&&(s.is.animating()||s.is.active())){k(s.refresh)}}},toggle:function(){if(s.is.active()||s.is.animating()){s.hide()}else{s.show()}},show:function(N){N=c.isFunction(N)?N:function(){};s.refreshModals();s.set.dimmerSettings();s.set.dimmerStyles();s.showModal(N)},hide:function(N){N=c.isFunction(N)?N:function(){};s.refreshModals();s.hideModal(N)},showModal:function(N){N=c.isFunction(N)?N:function(){};if(s.is.animating()||!s.is.active()){s.showDimmer();s.cacheSizes();if(s.can.useFlex()){s.remove.legacy()}else{s.set.legacy();s.set.modalOffset();s.debug("Using non-flex legacy modal positioning.")}s.set.screenHeight();s.set.type();s.set.clickaway();if(!J.allowMultiple&&s.others.active()){s.hideOthers(s.showModal)}else{if(J.allowMultiple&&J.detachable){w.detach().appendTo(E)}J.onShow.call(t);if(J.transition&&c.fn.transition!==d&&w.transition("is supported")){s.debug("Showing modal with css animations");w.transition({debug:J.debug,animation:J.transition+" in",queue:J.queue,duration:J.duration,useFailSafe:true,onComplete:function(){J.onVisible.apply(t);if(J.keyboardShortcuts){s.add.keyboardShortcuts()}s.save.focus();s.set.active();if(J.autofocus){s.set.autofocus()}N()}})}else{s.error(G.noTransition)}}}else{s.debug("Modal is already visible")}},hideModal:function(O,N){O=c.isFunction(O)?O:function(){};s.debug("Hiding modal");if(J.onHide.call(t,c(this))===false){s.verbose("Hide callback returned false cancelling hide");return}if(s.is.animating()||s.is.active()){if(J.transition&&c.fn.transition!==d&&w.transition("is supported")){s.remove.active();w.transition({debug:J.debug,animation:J.transition+" out",queue:J.queue,duration:J.duration,useFailSafe:true,onStart:function(){if(!s.others.active()&&!N){s.hideDimmer()}if(J.keyboardShortcuts){s.remove.keyboardShortcuts()}},onComplete:function(){J.onHidden.call(t);s.remove.dimmerStyles();s.restore.focus();O()}})}else{s.error(G.noTransition)}}},showDimmer:function(){if(x.dimmer("is animating")||!x.dimmer("is active")){s.debug("Showing dimmer");x.dimmer("show")}else{s.debug("Dimmer already visible")}},hideDimmer:function(){if(x.dimmer("is animating")||(x.dimmer("is active"))){s.unbind.scrollLock();x.dimmer("hide",function(){s.remove.clickaway();s.remove.screenHeight()})}else{s.debug("Dimmer is not visible cannot hide");return}},hideAll:function(O){var N=M.filter("."+u.active+", ."+u.animating);O=c.isFunction(O)?O:function(){};if(N.length>0){s.debug("Hiding all visible modals");s.hideDimmer();N.modal("hide modal",O)}},hideOthers:function(O){var N=y.filter("."+u.active+", ."+u.animating);O=c.isFunction(O)?O:function(){};if(N.length>0){s.debug("Hiding other modals",y);N.modal("hide modal",O,true)}},others:{active:function(){return(y.filter("."+u.active).length>0)},animating:function(){return(y.filter("."+u.animating).length>0)}},add:{keyboardShortcuts:function(){s.verbose("Adding keyboard shortcuts");i.on("keyup"+D,s.event.keyboard)}},save:{focus:function(){var N=c(a.activeElement),O=N.closest(w).length>0;if(!O){F=c(a.activeElement).blur()}}},restore:{focus:function(){if(F&&F.length>0){F.focus()}}},remove:{active:function(){w.removeClass(u.active)},legacy:function(){w.removeClass(u.legacy)},clickaway:function(){E.off("click"+L)},dimmerStyles:function(){E.removeClass(u.inverted);x.removeClass(u.blurring)},bodyStyle:function(){if(j.attr("style")===""){s.verbose("Removing style attribute");j.removeAttr("style")}},screenHeight:function(){s.debug("Removing page height");j.css("height","")},keyboardShortcuts:function(){s.verbose("Removing keyboard shortcuts");i.off("keyup"+D)},scrolling:function(){x.removeClass(u.scrolling);w.removeClass(u.scrolling)}},cacheSizes:function(){w.addClass(u.loading);var P=w.prop("scrollHeight"),N=w.outerWidth(),O=w.outerHeight();if(s.cache===d||O!==0){s.cache={pageHeight:c(a).outerHeight(),width:N,height:O+J.offset,scrollHeight:P+J.offset,contextHeight:(J.context=="body")?c(b).height():x.height()};s.cache.topOffset=-(s.cache.height/2)}w.removeClass(u.loading);s.debug("Caching modal and container sizes",s.cache)},can:{useFlex:function(){return(J.useFlex=="auto")?J.detachable&&!s.is.ie():J.useFlex},fit:function(){var O=s.cache.contextHeight,Q=s.cache.contextHeight/2,P=s.cache.topOffset,S=s.cache.scrollHeight,N=s.cache.height,T=J.padding,R=(Q+P);return(S>N)?(R+S+T<O):(N+(T*2)<O)}},is:{active:function(){return w.hasClass(u.active)},ie:function(){var O=(!(b.ActiveXObject)&&"ActiveXObject" in b),N=("ActiveXObject" in b);return(O||N)},animating:function(){return w.transition("is supported")?w.transition("is animating"):w.is(":visible")},scrolling:function(){return x.hasClass(u.scrolling)},modernBrowser:function(){return !(b.ActiveXObject||"ActiveXObject" in b)}},set:{autofocus:function(){var N=w.find("[tabindex], :input").filter(":visible"),O=N.filter("[autofocus]"),P=(O.length>0)?O.first():N.first();if(P.length>0){P.focus()}},clickaway:function(){E.on("click"+L,s.event.click)},dimmerSettings:function(){if(c.fn.dimmer===d){s.error(G.dimmer);return}var N={debug:J.debug,dimmerName:"modals",closable:"auto",useFlex:s.can.useFlex(),variation:J.centered?false:"top aligned",duration:{show:J.duration,hide:J.duration}},O=c.extend(true,N,J.dimmerSettings);if(J.inverted){O.variation=(O.variation!==d)?O.variation+" inverted":"inverted"}C.dimmer("setting",O)},dimmerStyles:function(){if(J.inverted){E.addClass(u.inverted)}else{E.removeClass(u.inverted)}if(J.blurring){x.addClass(u.blurring)}else{x.removeClass(u.blurring)}},modalOffset:function(){var O=s.cache.width,N=s.cache.height;w.css({marginTop:(J.centered&&s.can.fit())?-(N/2):0,marginLeft:-(O/2)});s.verbose("Setting modal offset for legacy mode")},screenHeight:function(){if(s.can.fit()){j.css("height","")}else{s.debug("Modal is taller than page content, resizing page height");j.css("height",s.cache.height+(J.padding*2))}},active:function(){w.addClass(u.active)},scrolling:function(){x.addClass(u.scrolling);w.addClass(u.scrolling);s.unbind.scrollLock()},legacy:function(){w.addClass(u.legacy)},type:function(){if(s.can.fit()){s.verbose("Modal fits on screen");if(!s.others.active()&&!s.others.animating()){s.remove.scrolling();s.bind.scrollLock()}}else{s.verbose("Modal cannot fit on screen setting to scrolling");s.set.scrolling()}},undetached:function(){x.addClass(u.undetached)}},setting:function(N,O){s.debug("Changing setting",N,O);if(c.isPlainObject(N)){c.extend(true,J,N)}else{if(O!==d){if(c.isPlainObject(J[N])){c.extend(true,J[N],O)}else{J[N]=O}}else{return J[N]}}},internal:function(N,O){if(c.isPlainObject(N)){c.extend(true,s,N)}else{if(O!==d){s[N]=O}else{return s[N]}}},debug:function(){if(!J.silent&&J.debug){if(J.performance){s.performance.log(arguments)}else{s.debug=Function.prototype.bind.call(console.info,console,J.name+":");s.debug.apply(console,arguments)}}},verbose:function(){if(!J.silent&&J.verbose&&J.debug){if(J.performance){s.performance.log(arguments)}else{s.verbose=Function.prototype.bind.call(console.info,console,J.name+":");s.verbose.apply(console,arguments)}}},error:function(){if(!J.silent){s.error=Function.prototype.bind.call(console.error,console,J.name+":");s.error.apply(console,arguments)}},performance:{log:function(P){var O,Q,N;if(J.performance){O=new Date().getTime();N=g||O;Q=O-N;g=O;n.push({Name:P[0],Arguments:[].slice.call(P,1)||"",Element:t,"Execution Time":Q})}clearTimeout(s.performance.timer);s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var O=J.name+":",N=0;g=false;clearTimeout(s.performance.timer);c.each(n,function(P,Q){N+=Q["Execution Time"]});O+=" "+N+"ms";if(l){O+=" '"+l+"'"}if((console.group!==d||console.table!==d)&&n.length>0){console.groupCollapsed(O);if(console.table){console.table(n)}else{c.each(n,function(P,Q){console.log(Q.Name+": "+Q["Execution Time"]+"ms")})}console.groupEnd()}n=[]}},invoke:function(S,O,Q){var P=K,T,R,N;O=O||p;Q=t||Q;if(typeof S=="string"&&P!==d){S=S.split(/[\. ]/);T=S.length-1;c.each(S,function(W,V){var U=(W!=T)?V+S[W+1].charAt(0).toUpperCase()+S[W+1].slice(1):S;if(c.isPlainObject(P[U])&&(W!=T)){P=P[U]}else{if(P[U]!==d){R=P[U];return false}else{if(c.isPlainObject(P[V])&&(W!=T)){P=P[V]}else{if(P[V]!==d){R=P[V];return false}else{return false}}}}})}if(c.isFunction(R)){N=R.apply(Q,O)}else{if(R!==d){N=R}}if(c.isArray(h)){h.push(N)}else{if(h!==d){h=[h,N]}else{if(N!==d){h=N}}}return R}};if(e){if(K===d){s.initialize()}s.invoke(m)}else{if(K!==d){K.invoke("destroy")}s.initialize()}});return(h!==d)?h:this};c.fn.modal.settings={name:"Modal",namespace:"modal",useFlex:"auto",offset:0,silent:false,debug:false,verbose:false,performance:true,observeChanges:false,allowMultiple:false,detachable:true,closable:true,autofocus:true,inverted:false,blurring:false,centered:true,dimmerSettings:{closable:false,useCSS:true},keyboardShortcuts:true,context:"body",queue:false,duration:500,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return true},onHidden:function(){},onApprove:function(){return true},onDeny:function(){return true},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",legacy:"legacy",loading:"loading",scrolling:"scrolling",undetached:"undetached"}}})(jQuery,window,document);