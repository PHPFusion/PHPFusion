/*!
 * # Semantic UI 2.4.2 - Tab
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(c,b,a,d){b=(typeof b!="undefined"&&b.Math==Math)?b:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();c.fn.tab=function(n){var l=c.isFunction(this)?c(b):c(this),i=l.selector||"",g=new Date().getTime(),k=[],j=arguments[0],e=(typeof j=="string"),m=[].slice.call(arguments,1),f=false,h;l.each(function(){var E=(c.isPlainObject(n))?c.extend(true,{},c.fn.tab.settings,n):c.extend({},c.fn.tab.settings),s=E.className,w=E.metadata,C=E.selector,B=E.error,A="."+E.namespace,x="module-"+E.namespace,t=c(this),z,p,y={},v=true,o=0,r=this,F=t.data(x),D,G,q,u;q={initialize:function(){q.debug("Initializing tab menu item",t);q.fix.callbacks();q.determineTabs();q.debug("Determining tabs",E.context,p);if(E.auto){q.set.auto()}q.bind.events();if(E.history&&!f){q.initializeHistory();f=true}q.instantiate()},instantiate:function(){q.verbose("Storing instance of module",q);F=q;t.data(x,q)},destroy:function(){q.debug("Destroying tabs",t);t.removeData(x).off(A)},bind:{events:function(){if(!c.isWindow(r)){q.debug("Attaching tab activation events to element",t);t.on("click"+A,q.event.click)}}},determineTabs:function(){var H;if(E.context==="parent"){if(t.closest(C.ui).length>0){H=t.closest(C.ui);q.verbose("Using closest UI element as parent",H)}else{H=t}z=H.parent();q.verbose("Determined parent element for creating context",z)}else{if(E.context){z=c(E.context);q.verbose("Using selector for tab context",E.context,z)}else{z=c("body")}}if(E.childrenOnly){p=z.children(C.tabs);q.debug("Searching tab context children for tabs",z,p)}else{p=z.find(C.tabs);q.debug("Searching tab context for tabs",z,p)}},fix:{callbacks:function(){if(c.isPlainObject(n)&&(n.onTabLoad||n.onTabInit)){if(n.onTabLoad){n.onLoad=n.onTabLoad;delete n.onTabLoad;q.error(B.legacyLoad,n.onLoad)}if(n.onTabInit){n.onFirstLoad=n.onTabInit;delete n.onTabInit;q.error(B.legacyInit,n.onFirstLoad)}E=c.extend(true,{},c.fn.tab.settings,n)}}},initializeHistory:function(){q.debug("Initializing page state");if(c.address===d){q.error(B.state);return false}else{if(E.historyType=="state"){q.debug("Using HTML5 to manage state");if(E.path!==false){c.address.history(true).state(E.path)}else{q.error(B.path);return false}}c.address.bind("change",q.event.history.change)}},event:{click:function(I){var H=c(this).data(w.tab);if(H!==d){if(E.history){q.verbose("Updating page state",I);c.address.value(H)}else{q.verbose("Changing tab",I);q.changeTab(H)}I.preventDefault()}else{q.debug("No tab specified")}},history:{change:function(J){var H=J.pathNames.join("/")||q.get.initialPath(),I=E.templates.determineTitle(H)||false;q.performance.display();q.debug("History change event",H,J);u=J;if(H!==d){q.changeTab(H)}if(I){c.address.title(I)}}}},refresh:function(){if(D){q.debug("Refreshing tab",D);q.changeTab(D)}},cache:{read:function(H){return(H!==d)?y[H]:false},add:function(I,H){I=I||D;q.debug("Adding cached content for",I);y[I]=H},remove:function(H){H=H||D;q.debug("Removing cached content for",H);delete y[H]}},set:{auto:function(){var H=(typeof E.path=="string")?E.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";q.verbose("Setting up automatic tab retrieval from server",H);if(c.isPlainObject(E.apiSettings)){E.apiSettings.url=H}else{E.apiSettings={url:H}}},loading:function(I){var J=q.get.tabElement(I),H=J.hasClass(s.loading);if(!H){q.verbose("Setting loading state for",J);J.addClass(s.loading).siblings(p).removeClass(s.active+" "+s.loading);if(J.length>0){E.onRequest.call(J[0],I)}}},state:function(H){c.address.value(H)}},changeTab:function(J){var H=(b.history&&b.history.pushState),I=(H&&E.ignoreFirstLoad&&v),K=(E.auto||c.isPlainObject(E.apiSettings)),L=(K&&!I)?q.utilities.pathToArray(J):q.get.defaultPathArray(J);J=q.utilities.arrayToPath(L);c.each(L,function(P,O){var V=L.slice(0,P+1),U=q.utilities.arrayToPath(V),N=q.is.tab(U),Q=(P+1==L.length),T=q.get.tabElement(U),W,S,M,R;q.verbose("Looking for tab",O);if(N){q.verbose("Tab was found",O);D=U;G=q.utilities.filterArray(L,V);if(Q){R=true}else{S=L.slice(0,P+2);M=q.utilities.arrayToPath(S);R=(!q.is.tab(M));if(R){q.verbose("Tab parameters found",S)}}if(R&&K){if(!I){q.activate.navigation(U);q.fetch.content(U,J)}else{q.debug("Ignoring remote content on first tab load",U);v=false;q.cache.add(J,T.html());q.activate.all(U);E.onFirstLoad.call(T[0],U,G,u);E.onLoad.call(T[0],U,G,u)}return false}else{q.debug("Opened local tab",U);q.activate.all(U);if(!q.cache.read(U)){q.cache.add(U,true);q.debug("First time tab loaded calling tab init");E.onFirstLoad.call(T[0],U,G,u)}E.onLoad.call(T[0],U,G,u)}}else{if(J.search("/")==-1&&J!==""){W=c("#"+J+', a[name="'+J+'"]');U=W.closest("[data-tab]").data(w.tab);T=q.get.tabElement(U);if(W&&W.length>0&&U){q.debug("Anchor link used, opening parent tab",T,W);if(!T.hasClass(s.active)){setTimeout(function(){q.scrollTo(W)},0)}q.activate.all(U);if(!q.cache.read(U)){q.cache.add(U,true);q.debug("First time tab loaded calling tab init");E.onFirstLoad.call(T[0],U,G,u)}E.onLoad.call(T[0],U,G,u);return false}}else{q.error(B.missingTab,t,z,U);return false}}})},scrollTo:function(H){var I=(H&&H.length>0)?H.offset().top:false;if(I!==false){q.debug("Forcing scroll to an in-page link in a hidden tab",I,H);c(a).scrollTop(I)}},update:{content:function(H,I,K){var L=q.get.tabElement(H),J=L[0];K=(K!==d)?K:E.evaluateScripts;if(typeof E.cacheType=="string"&&E.cacheType.toLowerCase()=="dom"&&typeof I!=="string"){L.empty().append(c(I).clone(true))}else{if(K){q.debug("Updating HTML and evaluating inline scripts",H,I);L.html(I)}else{q.debug("Updating HTML",H,I);J.innerHTML=I}}}},fetch:{content:function(H,O){var L=q.get.tabElement(H),K={dataType:"html",encodeParameters:false,on:"now",cache:E.alwaysRefresh,headers:{"X-Remote":true},onSuccess:function(P){if(E.cacheType=="response"){q.cache.add(O,P)}q.update.content(H,P);if(H==D){q.debug("Content loaded",H);q.activate.tab(H)}else{q.debug("Content loaded in background",H)}E.onFirstLoad.call(L[0],H,G,u);E.onLoad.call(L[0],H,G,u);if(E.loadOnce){q.cache.add(O,true)}else{if(typeof E.cacheType=="string"&&E.cacheType.toLowerCase()=="dom"&&L.children().length>0){setTimeout(function(){var Q=L.children().clone(true);Q=Q.not("script");q.cache.add(O,Q)},0)}else{q.cache.add(O,L.html())}}},urlData:{tab:O}},J=L.api("get request")||false,N=(J&&J.state()==="pending"),M,I;O=O||H;I=q.cache.read(O);if(E.cache&&I){q.activate.tab(H);q.debug("Adding cached content",O);if(!E.loadOnce){if(E.evaluateScripts=="once"){q.update.content(H,I,false)}else{q.update.content(H,I)}}E.onLoad.call(L[0],H,G,u)}else{if(N){q.set.loading(H);q.debug("Content is already loading",O)}else{if(c.api!==d){M=c.extend(true,{},E.apiSettings,K);q.debug("Retrieving remote content",O,M);q.set.loading(H);L.api(M)}else{q.error(B.api)}}}}},activate:{all:function(H){q.activate.tab(H);q.activate.navigation(H)},tab:function(H){var J=q.get.tabElement(H),K=(E.deactivate=="siblings")?J.siblings(p):p.not(J),I=J.hasClass(s.active);q.verbose("Showing tab content for",J);if(!I){J.addClass(s.active);K.removeClass(s.active+" "+s.loading);if(J.length>0){E.onVisible.call(J[0],H)}}},navigation:function(H){var K=q.get.navElement(H),J=(E.deactivate=="siblings")?K.siblings(l):l.not(K),I=K.hasClass(s.active);q.verbose("Activating tab navigation for",K,H);if(!I){K.addClass(s.active);J.removeClass(s.active+" "+s.loading)}}},deactivate:{all:function(){q.deactivate.navigation();q.deactivate.tabs()},navigation:function(){l.removeClass(s.active)},tabs:function(){p.removeClass(s.active+" "+s.loading)}},is:{tab:function(H){return(H!==d)?(q.get.tabElement(H).length>0):false}},get:{initialPath:function(){return l.eq(0).data(w.tab)||p.eq(0).data(w.tab)},path:function(){return c.address.value()},defaultPathArray:function(H){return q.utilities.pathToArray(q.get.defaultPath(H))},defaultPath:function(H){var J=l.filter("[data-"+w.tab+'^="'+H+'/"]').eq(0),I=J.data(w.tab)||false;if(I){q.debug("Found default tab",I);if(o<E.maxDepth){o++;return q.get.defaultPath(I)}q.error(B.recursion)}else{q.debug("No default tabs found for",H,p)}o=0;return H},navElement:function(H){H=H||D;return l.filter("[data-"+w.tab+'="'+H+'"]')},tabElement:function(H){var K,J,L,I;H=H||D;L=q.utilities.pathToArray(H);I=q.utilities.last(L);K=p.filter("[data-"+w.tab+'="'+H+'"]');J=p.filter("[data-"+w.tab+'="'+I+'"]');return(K.length>0)?K:J},tab:function(){return D}},utilities:{filterArray:function(I,H){return c.grep(I,function(J){return(c.inArray(J,H)==-1)})},last:function(H){return c.isArray(H)?H[H.length-1]:false},pathToArray:function(H){if(H===d){H=D}return typeof H=="string"?H.split("/"):[H]},arrayToPath:function(H){return c.isArray(H)?H.join("/"):false}},setting:function(H,I){q.debug("Changing setting",H,I);if(c.isPlainObject(H)){c.extend(true,E,H)}else{if(I!==d){if(c.isPlainObject(E[H])){c.extend(true,E[H],I)}else{E[H]=I}}else{return E[H]}}},internal:function(H,I){if(c.isPlainObject(H)){c.extend(true,q,H)}else{if(I!==d){q[H]=I}else{return q[H]}}},debug:function(){if(!E.silent&&E.debug){if(E.performance){q.performance.log(arguments)}else{q.debug=Function.prototype.bind.call(console.info,console,E.name+":");q.debug.apply(console,arguments)}}},verbose:function(){if(!E.silent&&E.verbose&&E.debug){if(E.performance){q.performance.log(arguments)}else{q.verbose=Function.prototype.bind.call(console.info,console,E.name+":");q.verbose.apply(console,arguments)}}},error:function(){if(!E.silent){q.error=Function.prototype.bind.call(console.error,console,E.name+":");q.error.apply(console,arguments)}},performance:{log:function(J){var I,K,H;if(E.performance){I=new Date().getTime();H=g||I;K=I-H;g=I;k.push({Name:J[0],Arguments:[].slice.call(J,1)||"",Element:r,"Execution Time":K})}clearTimeout(q.performance.timer);q.performance.timer=setTimeout(q.performance.display,500)},display:function(){var I=E.name+":",H=0;g=false;clearTimeout(q.performance.timer);c.each(k,function(J,K){H+=K["Execution Time"]});I+=" "+H+"ms";if(i){I+=" '"+i+"'"}if((console.group!==d||console.table!==d)&&k.length>0){console.groupCollapsed(I);if(console.table){console.table(k)}else{c.each(k,function(J,K){console.log(K.Name+": "+K["Execution Time"]+"ms")})}console.groupEnd()}k=[]}},invoke:function(M,I,K){var J=F,N,L,H;I=I||m;K=r||K;if(typeof M=="string"&&J!==d){M=M.split(/[\. ]/);N=M.length-1;c.each(M,function(Q,P){var O=(Q!=N)?P+M[Q+1].charAt(0).toUpperCase()+M[Q+1].slice(1):M;if(c.isPlainObject(J[O])&&(Q!=N)){J=J[O]}else{if(J[O]!==d){L=J[O];return false}else{if(c.isPlainObject(J[P])&&(Q!=N)){J=J[P]}else{if(J[P]!==d){L=J[P];return false}else{q.error(B.method,M);return false}}}}})}if(c.isFunction(L)){H=L.apply(K,I)}else{if(L!==d){H=L}}if(c.isArray(h)){h.push(H)}else{if(h!==d){h=[h,H]}else{if(H!==d){h=H}}}return L}};if(e){if(F===d){q.initialize()}q.invoke(j)}else{if(F!==d){F.invoke("destroy")}q.initialize()}});return(h!==d)?h:this};c.tab=function(){c(b).tab.apply(this,arguments)};c.fn.tab.settings={name:"Tab",namespace:"tab",silent:false,debug:false,verbose:false,performance:true,auto:false,history:false,historyType:"hash",path:false,context:false,childrenOnly:false,maxDepth:25,deactivate:"siblings",alwaysRefresh:false,cache:true,loadOnce:false,cacheType:"response",ignoreFirstLoad:false,apiSettings:false,evaluateScripts:"once",onFirstLoad:function(e,f,g){},onLoad:function(e,f,g){},onVisible:function(e,f,g){},onRequest:function(e,f,g){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}})(jQuery,window,document);