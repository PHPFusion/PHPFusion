/*!
 * # Semantic UI 2.4.2 - Visibility
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(c,b,a,d){b=(typeof b!="undefined"&&b.Math==Math)?b:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();c.fn.visibility=function(o){var m=c(this),j=m.selector||"",h=new Date().getTime(),l=[],k=arguments[0],e=(typeof k=="string"),n=[].slice.call(arguments,1),i,g=m.length,f=0;m.each(function(){var G=(c.isPlainObject(o))?c.extend(true,{},c.fn.visibility.settings,o):c.extend({},c.fn.visibility.settings),r=G.className,x=G.namespace,D=G.error,w=G.metadata,C="."+x,z="module-"+x,A=c(b),u=c(this),B=c(G.context),v,F=u.selector||"",H=u.data(z),s=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(I){setTimeout(I,0)},q=this,t=false,y,E,p;p={initialize:function(){p.debug("Initializing",G);p.setup.cache();if(p.should.trackChanges()){if(G.type=="image"){p.setup.image()}if(G.type=="fixed"){p.setup.fixed()}if(G.observeChanges){p.observeChanges()}p.bind.events()}p.save.position();if(!p.is.visible()){p.error(D.visible,u)}if(G.initialCheck){p.checkVisibility()}p.instantiate()},instantiate:function(){p.debug("Storing instance",p);u.data(z,p);H=p},destroy:function(){p.verbose("Destroying previous module");if(E){E.disconnect()}if(y){y.disconnect()}A.off("load"+C,p.event.load).off("resize"+C,p.event.resize);B.off("scroll"+C,p.event.scroll).off("scrollchange"+C,p.event.scrollchange);if(G.type=="fixed"){p.resetFixed();p.remove.placeholder()}u.off(C).removeData(z)},observeChanges:function(){if("MutationObserver" in b){y=new MutationObserver(p.event.contextChanged);E=new MutationObserver(p.event.changed);y.observe(a,{childList:true,subtree:true});E.observe(q,{childList:true,subtree:true});p.debug("Setting up mutation observer",E)}},bind:{events:function(){p.verbose("Binding visibility events to scroll and resize");if(G.refreshOnLoad){A.on("load"+C,p.event.load)}A.on("resize"+C,p.event.resize);B.off("scroll"+C).on("scroll"+C,p.event.scroll).on("scrollchange"+C,p.event.scrollchange)}},event:{changed:function(I){p.verbose("DOM tree modified, updating visibility calculations");p.timer=setTimeout(function(){p.verbose("DOM tree modified, updating sticky menu");p.refresh()},100)},contextChanged:function(I){[].forEach.call(I,function(J){if(J.removedNodes){[].forEach.call(J.removedNodes,function(K){if(K==q||c(K).find(q).length>0){p.debug("Element removed from DOM, tearing down events");p.destroy()}})}})},resize:function(){p.debug("Window resized");if(G.refreshOnResize){s(p.refresh)}},load:function(){p.debug("Page finished loading");s(p.refresh)},scroll:function(){if(G.throttle){clearTimeout(p.timer);p.timer=setTimeout(function(){B.triggerHandler("scrollchange"+C,[B.scrollTop()])},G.throttle)}else{s(function(){B.triggerHandler("scrollchange"+C,[B.scrollTop()])})}},scrollchange:function(J,I){p.checkVisibility(I)}},precache:function(J,O){if(!(J instanceof Array)){J=[J]}var N=J.length,M=0,K=[],I=a.createElement("img"),L=function(){M++;if(M>=J.length){if(c.isFunction(O)){O()}}};while(N--){I=a.createElement("img");I.onload=L;I.onerror=L;I.src=J[N];K.push(I)}},enableCallbacks:function(){p.debug("Allowing callbacks to occur");t=false},disableCallbacks:function(){p.debug("Disabling all callbacks temporarily");t=true},should:{trackChanges:function(){if(e){p.debug("One time query, no need to bind events");return false}p.debug("Callbacks being attached");return true}},setup:{cache:function(){p.cache={occurred:{},screen:{},element:{}}},image:function(){var I=u.data(w.src);if(I){p.verbose("Lazy loading image",I);G.once=true;G.observeChanges=false;G.onOnScreen=function(){p.debug("Image on screen",q);p.precache(I,function(){p.set.image(I,function(){f++;if(f==g){G.onAllLoaded.call(this)}G.onLoad.call(this)})})}}},fixed:function(){p.debug("Setting up fixed");G.once=false;G.observeChanges=false;G.initialCheck=true;G.refreshOnLoad=true;if(!o.transition){G.transition=false}p.create.placeholder();p.debug("Added placeholder",v);G.onTopPassed=function(){p.debug("Element passed, adding fixed position",u);p.show.placeholder();p.set.fixed();if(G.transition){if(c.fn.transition!==d){u.transition(G.transition,G.duration)}}};G.onTopPassedReverse=function(){p.debug("Element returned to position, removing fixed",u);p.hide.placeholder();p.remove.fixed()}}},create:{placeholder:function(){p.verbose("Creating fixed position placeholder");v=u.clone(false).css("display","none").addClass(r.placeholder).insertAfter(u)}},show:{placeholder:function(){p.verbose("Showing placeholder");v.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){p.verbose("Hiding placeholder");v.css("display","none").css("visibility","")}},set:{fixed:function(){p.verbose("Setting element to fixed position");u.addClass(r.fixed).css({position:"fixed",top:G.offset+"px",left:"auto",zIndex:G.zIndex});G.onFixed.call(q)},image:function(I,J){u.attr("src",I);if(G.transition){if(c.fn.transition!==d){if(u.hasClass(r.visible)){p.debug("Transition already occurred on this image, skipping animation");return}u.transition(G.transition,G.duration,J)}else{u.fadeIn(G.duration,J)}}else{u.show()}}},is:{onScreen:function(){var I=p.get.elementCalculations();return I.onScreen},offScreen:function(){var I=p.get.elementCalculations();return I.offScreen},visible:function(){if(p.cache&&p.cache.element){return !(p.cache.element.width===0&&p.cache.element.offset.top===0)}return false},verticallyScrollableContext:function(){var I=(B.get(0)!==b)?B.css("overflow-y"):false;return(I=="auto"||I=="scroll")},horizontallyScrollableContext:function(){var I=(B.get(0)!==b)?B.css("overflow-x"):false;return(I=="auto"||I=="scroll")}},refresh:function(){p.debug("Refreshing constants (width/height)");if(G.type=="fixed"){p.resetFixed()}p.reset();p.save.position();if(G.checkOnRefresh){p.checkVisibility()}G.onRefresh.call(q)},resetFixed:function(){p.remove.fixed();p.remove.occurred()},reset:function(){p.verbose("Resetting all cached values");if(c.isPlainObject(p.cache)){p.cache.screen={};p.cache.element={}}},checkVisibility:function(I){p.verbose("Checking visibility of element",p.cache.element);if(!t&&p.is.visible()){p.save.scroll(I);p.save.calculations();p.passed();p.passingReverse();p.topVisibleReverse();p.bottomVisibleReverse();p.topPassedReverse();p.bottomPassedReverse();p.onScreen();p.offScreen();p.passing();p.topVisible();p.bottomVisible();p.topPassed();p.bottomPassed();if(G.onUpdate){G.onUpdate.call(q,p.get.elementCalculations())}}},passed:function(K,L){var J=p.get.elementCalculations(),I;if(K&&L){G.onPassed[K]=L}else{if(K!==d){return(p.get.pixelsPassed(K)>J.pixelsPassed)}else{if(J.passing){c.each(G.onPassed,function(M,N){if(J.bottomVisible||J.pixelsPassed>p.get.pixelsPassed(M)){p.execute(N,M)}else{if(!G.once){p.remove.occurred(N)}}})}}}},onScreen:function(J){var I=p.get.elementCalculations(),L=J||G.onOnScreen,K="onScreen";if(J){p.debug("Adding callback for onScreen",J);G.onOnScreen=J}if(I.onScreen){p.execute(L,K)}else{if(!G.once){p.remove.occurred(K)}}if(J!==d){return I.onOnScreen}},offScreen:function(J){var I=p.get.elementCalculations(),L=J||G.onOffScreen,K="offScreen";if(J){p.debug("Adding callback for offScreen",J);G.onOffScreen=J}if(I.offScreen){p.execute(L,K)}else{if(!G.once){p.remove.occurred(K)}}if(J!==d){return I.onOffScreen}},passing:function(J){var I=p.get.elementCalculations(),L=J||G.onPassing,K="passing";if(J){p.debug("Adding callback for passing",J);G.onPassing=J}if(I.passing){p.execute(L,K)}else{if(!G.once){p.remove.occurred(K)}}if(J!==d){return I.passing}},topVisible:function(J){var I=p.get.elementCalculations(),L=J||G.onTopVisible,K="topVisible";if(J){p.debug("Adding callback for top visible",J);G.onTopVisible=J}if(I.topVisible){p.execute(L,K)}else{if(!G.once){p.remove.occurred(K)}}if(J===d){return I.topVisible}},bottomVisible:function(J){var I=p.get.elementCalculations(),L=J||G.onBottomVisible,K="bottomVisible";if(J){p.debug("Adding callback for bottom visible",J);G.onBottomVisible=J}if(I.bottomVisible){p.execute(L,K)}else{if(!G.once){p.remove.occurred(K)}}if(J===d){return I.bottomVisible}},topPassed:function(J){var I=p.get.elementCalculations(),L=J||G.onTopPassed,K="topPassed";if(J){p.debug("Adding callback for top passed",J);G.onTopPassed=J}if(I.topPassed){p.execute(L,K)}else{if(!G.once){p.remove.occurred(K)}}if(J===d){return I.topPassed}},bottomPassed:function(J){var I=p.get.elementCalculations(),L=J||G.onBottomPassed,K="bottomPassed";if(J){p.debug("Adding callback for bottom passed",J);G.onBottomPassed=J}if(I.bottomPassed){p.execute(L,K)}else{if(!G.once){p.remove.occurred(K)}}if(J===d){return I.bottomPassed}},passingReverse:function(J){var I=p.get.elementCalculations(),L=J||G.onPassingReverse,K="passingReverse";if(J){p.debug("Adding callback for passing reverse",J);G.onPassingReverse=J}if(!I.passing){if(p.get.occurred("passing")){p.execute(L,K)}}else{if(!G.once){p.remove.occurred(K)}}if(J!==d){return !I.passing}},topVisibleReverse:function(J){var I=p.get.elementCalculations(),L=J||G.onTopVisibleReverse,K="topVisibleReverse";if(J){p.debug("Adding callback for top visible reverse",J);G.onTopVisibleReverse=J}if(!I.topVisible){if(p.get.occurred("topVisible")){p.execute(L,K)}}else{if(!G.once){p.remove.occurred(K)}}if(J===d){return !I.topVisible}},bottomVisibleReverse:function(J){var I=p.get.elementCalculations(),L=J||G.onBottomVisibleReverse,K="bottomVisibleReverse";if(J){p.debug("Adding callback for bottom visible reverse",J);G.onBottomVisibleReverse=J}if(!I.bottomVisible){if(p.get.occurred("bottomVisible")){p.execute(L,K)}}else{if(!G.once){p.remove.occurred(K)}}if(J===d){return !I.bottomVisible}},topPassedReverse:function(J){var I=p.get.elementCalculations(),L=J||G.onTopPassedReverse,K="topPassedReverse";if(J){p.debug("Adding callback for top passed reverse",J);G.onTopPassedReverse=J}if(!I.topPassed){if(p.get.occurred("topPassed")){p.execute(L,K)}}else{if(!G.once){p.remove.occurred(K)}}if(J===d){return !I.onTopPassed}},bottomPassedReverse:function(J){var I=p.get.elementCalculations(),L=J||G.onBottomPassedReverse,K="bottomPassedReverse";if(J){p.debug("Adding callback for bottom passed reverse",J);G.onBottomPassedReverse=J}if(!I.bottomPassed){if(p.get.occurred("bottomPassed")){p.execute(L,K)}}else{if(!G.once){p.remove.occurred(K)}}if(J===d){return !I.bottomPassed}},execute:function(L,K){var I=p.get.elementCalculations(),J=p.get.screenCalculations();L=L||false;if(L){if(G.continuous){p.debug("Callback being called continuously",K,I);L.call(q,I,J)}else{if(!p.get.occurred(K)){p.debug("Conditions met",K,I);L.call(q,I,J)}}}p.save.occurred(K)},remove:{fixed:function(){p.debug("Removing fixed position");u.removeClass(r.fixed).css({position:"",top:"",left:"",zIndex:""});G.onUnfixed.call(q)},placeholder:function(){p.debug("Removing placeholder content");if(v){v.remove()}},occurred:function(J){if(J){var I=p.cache.occurred;if(I[J]!==d&&I[J]===true){p.debug("Callback can now be called again",J);p.cache.occurred[J]=false}}else{p.cache.occurred={}}}},save:{calculations:function(){p.verbose("Saving all calculations necessary to determine positioning");p.save.direction();p.save.screenCalculations();p.save.elementCalculations()},occurred:function(I){if(I){if(p.cache.occurred[I]===d||(p.cache.occurred[I]!==true)){p.verbose("Saving callback occurred",I);p.cache.occurred[I]=true}}},scroll:function(I){I=I+G.offset||B.scrollTop()+G.offset;p.cache.scroll=I},direction:function(){var I=p.get.scroll(),J=p.get.lastScroll(),K;if(I>J&&J){K="down"}else{if(I<J&&J){K="up"}else{K="static"}}p.cache.direction=K;return p.cache.direction},elementPosition:function(){var J=p.cache.element,I=p.get.screenSize();p.verbose("Saving element position");J.fits=(J.height<I.height);J.offset=u.offset();J.width=u.outerWidth();J.height=u.outerHeight();if(p.is.verticallyScrollableContext()){J.offset.top+=B.scrollTop()-B.offset().top}if(p.is.horizontallyScrollableContext()){J.offset.left+=B.scrollLeft-B.offset().left}p.cache.element=J;return J},elementCalculations:function(){var I=p.get.screenCalculations(),J=p.get.elementPosition();if(G.includeMargin){J.margin={};J.margin.top=parseInt(u.css("margin-top"),10);J.margin.bottom=parseInt(u.css("margin-bottom"),10);J.top=J.offset.top-J.margin.top;J.bottom=J.offset.top+J.height+J.margin.bottom}else{J.top=J.offset.top;J.bottom=J.offset.top+J.height}J.topPassed=(I.top>=J.top);J.bottomPassed=(I.top>=J.bottom);J.topVisible=(I.bottom>=J.top)&&!J.topPassed;J.bottomVisible=(I.bottom>=J.bottom)&&!J.bottomPassed;J.pixelsPassed=0;J.percentagePassed=0;J.onScreen=((J.topVisible||J.passing)&&!J.bottomPassed);J.passing=(J.topPassed&&!J.bottomPassed);J.offScreen=(!J.onScreen);if(J.passing){J.pixelsPassed=(I.top-J.top);J.percentagePassed=(I.top-J.top)/J.height}p.cache.element=J;p.verbose("Updated element calculations",J);return J},screenCalculations:function(){var I=p.get.scroll();p.save.direction();p.cache.screen.top=I;p.cache.screen.bottom=I+p.cache.screen.height;return p.cache.screen},screenSize:function(){p.verbose("Saving window position");p.cache.screen={height:B.height()}},position:function(){p.save.screenSize();p.save.elementPosition()}},get:{pixelsPassed:function(J){var I=p.get.elementCalculations();if(J.search("%")>-1){return(I.height*(parseInt(J,10)/100))}return parseInt(J,10)},occurred:function(I){return(p.cache.occurred!==d)?p.cache.occurred[I]||false:false},direction:function(){if(p.cache.direction===d){p.save.direction()}return p.cache.direction},elementPosition:function(){if(p.cache.element===d){p.save.elementPosition()}return p.cache.element},elementCalculations:function(){if(p.cache.element===d){p.save.elementCalculations()}return p.cache.element},screenCalculations:function(){if(p.cache.screen===d){p.save.screenCalculations()}return p.cache.screen},screenSize:function(){if(p.cache.screen===d){p.save.screenSize()}return p.cache.screen},scroll:function(){if(p.cache.scroll===d){p.save.scroll()}return p.cache.scroll},lastScroll:function(){if(p.cache.screen===d){p.debug("First scroll event, no last scroll could be found");return false}return p.cache.screen.top}},setting:function(I,J){if(c.isPlainObject(I)){c.extend(true,G,I)}else{if(J!==d){G[I]=J}else{return G[I]}}},internal:function(I,J){if(c.isPlainObject(I)){c.extend(true,p,I)}else{if(J!==d){p[I]=J}else{return p[I]}}},debug:function(){if(!G.silent&&G.debug){if(G.performance){p.performance.log(arguments)}else{p.debug=Function.prototype.bind.call(console.info,console,G.name+":");p.debug.apply(console,arguments)}}},verbose:function(){if(!G.silent&&G.verbose&&G.debug){if(G.performance){p.performance.log(arguments)}else{p.verbose=Function.prototype.bind.call(console.info,console,G.name+":");p.verbose.apply(console,arguments)}}},error:function(){if(!G.silent){p.error=Function.prototype.bind.call(console.error,console,G.name+":");p.error.apply(console,arguments)}},performance:{log:function(K){var J,L,I;if(G.performance){J=new Date().getTime();I=h||J;L=J-I;h=J;l.push({Name:K[0],Arguments:[].slice.call(K,1)||"",Element:q,"Execution Time":L})}clearTimeout(p.performance.timer);p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var J=G.name+":",I=0;h=false;clearTimeout(p.performance.timer);c.each(l,function(K,L){I+=L["Execution Time"]});J+=" "+I+"ms";if(j){J+=" '"+j+"'"}if((console.group!==d||console.table!==d)&&l.length>0){console.groupCollapsed(J);if(console.table){console.table(l)}else{c.each(l,function(K,L){console.log(L.Name+": "+L["Execution Time"]+"ms")})}console.groupEnd()}l=[]}},invoke:function(N,J,L){var K=H,O,M,I;J=J||n;L=q||L;if(typeof N=="string"&&K!==d){N=N.split(/[\. ]/);O=N.length-1;c.each(N,function(R,Q){var P=(R!=O)?Q+N[R+1].charAt(0).toUpperCase()+N[R+1].slice(1):N;if(c.isPlainObject(K[P])&&(R!=O)){K=K[P]}else{if(K[P]!==d){M=K[P];return false}else{if(c.isPlainObject(K[Q])&&(R!=O)){K=K[Q]}else{if(K[Q]!==d){M=K[Q];return false}else{p.error(D.method,N);return false}}}}})}if(c.isFunction(M)){I=M.apply(L,J)}else{if(M!==d){I=M}}if(c.isArray(i)){i.push(I)}else{if(i!==d){i=[i,I]}else{if(I!==d){i=I}}}return M}};if(e){if(H===d){p.initialize()}H.save.scroll();H.save.calculations();p.invoke(k)}else{if(H!==d){H.invoke("destroy")}p.initialize()}});return(i!==d)?i:this};c.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:false,verbose:false,performance:true,observeChanges:true,initialCheck:true,refreshOnLoad:true,refreshOnResize:true,checkOnRefresh:true,once:true,continuous:false,offset:0,includeMargin:false,context:b,throttle:false,type:false,zIndex:"10",transition:"fade in",duration:1000,onPassed:{},onOnScreen:false,onOffScreen:false,onPassing:false,onTopVisible:false,onBottomVisible:false,onTopPassed:false,onBottomPassed:false,onPassingReverse:false,onTopVisibleReverse:false,onBottomVisibleReverse:false,onTopPassedReverse:false,onBottomPassedReverse:false,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:false,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}})(jQuery,window,document);